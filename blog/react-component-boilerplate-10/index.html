<html lang="en"><head><title>SurviveJS - React Component Boilerplate v1.0</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui"/><meta name="description" content="

If you try searching GitHub for React boilerplates, you&#x27;ll find over thousand results. Nothing is â€¦"/><meta name="keywords" content="webpack,react,javascript,programming,web development"/><link rel="icon" type="image/png" href="/assets/img/favicon.png"/><link rel="alternate" type="application/atom+xml" href="./atom.xml"/><link rel="stylesheet" href="/assets/main.css"/></head><body><main role="main"><div><div class="post"><div class="header-image" style="background-image:url(/assets/img/boilerplate.jpg);"></div><h1 class="post__heading">React Component Boilerplate v1.0</h1><div class="post__content"><div><p>If you <a href="https://github.com/search?utf8=%E2%9C%93&amp;q=react+boilerplate">try searching GitHub for React boilerplates</a>, you&apos;ll find over thousand results. Nothing is harder than to agree on a standard boilerplate. As a result we have many to choose from.</p>
<p>Given I like to author React components, such as <a href="https://bebraw.github.io/reactabular/">Reactabular</a>, I&apos;ve developed a little boilerplate myself. <a href="https://survivejs.github.io/react-component-boilerplate/">survivejs/react-component-boilerplate</a> incorporates a large amount of good practices. I&apos;ll go through some of them next. I cover many of them <a href="../../webpack_react/authoring_libraries/">at the book</a> but it doesn&apos;t hurt to dig deeper.</p>
<h2 class="header"><a class="header-anchor" href="#testing" id="testing"></a><span class="text">Testing</span><a class="header-anchor-select" href="#testing">#</a></h2>
<p>I implemented my testing approach based on Cesar Andreu&apos;s <a href="https://github.com/cesarandreu/web-app">web-app</a>. It is based on <a href="https://karma-runner.github.io">Karma</a> (test runner), <a href="https://mochajs.org/">Mocha</a> (test framework), <a href="http://chaijs.com/">Chai</a> (assertions), and <a href="http://phantomjs.org/">PhantomJS</a> (headless browser). Code coverage reports are generated through <a href="https://gotwarlost.github.io/istanbul/">istanbul</a> and <a href="https://github.com/douglasduteil/isparta">isparta</a> (Babel compatibility for istanbul). Besides casual <em>npm test</em>, there&apos;s also a TDD mode (<em>npm run tdd</em>) so you can run tests automatically while you develop.</p>
<p>Not surprisingly this is where most of the complexity of my boilerplate lies. There&apos;s not much I can do about it, though. There are times when I wish npm allowed more granularity. If I could push test dependencies to something like <code>testDependencies</code> or define hierarchies below <code>devDependencies</code>, that would help me to communicate the intent better.</p>
<p>My earlier setup relied on Facebook&apos;s <a href="https://facebook.github.io/jest/">Jest</a>. Even though it&apos;s easier to hook it up, I find the current approach more developer friendly. I never could get into grips with Jest&apos;s auto-mocking behavior and performance was an issue even with small libraries. It is possible the situation will change but for now I&apos;m sticking with Mocha myself. Keep an eye on Jest, though.</p>
<p>Linting is handled through <a href="http://eslint.org/">ESLint</a>. It&apos;s an amazing tool and will contribute towards the quality and consistency of your code. Read <a href="../../webpack_react/linting_in_webpack/">my chapter about linting</a> to get into it. There&apos;s <em>npm run lint</em> and Webpack triggers it as a pre-loader. This way I get linting warnings and errors during develop. In addition I have my editor set up to show them interactively.</p>
<h2 class="header"><a class="header-anchor" href="#handling-versions" id="handling-versions"></a><span class="text">Handling Versions</span><a class="header-anchor-select" href="#handling-versions">#</a></h2>
<p>An important part of developing libraries is actually publishing them. I&apos;ve tried to keep this simple. I can get a release out simply by hitting:</p>
<pre><code class="lang-bash">$ npm version <span class="token number">0.2</span><span class="token punctuation">.</span>1
$ npm publish
$ <span class="token function">git</span> push
$ <span class="token function">git</span> push <span class="token operator">--</span>tags
</code></pre>
<p>I know this could be hidden easily behind a single command but it&apos;s not too bad as I might not want to push immediately always. A tool known as <a href="https://www.npmjs.com/package/semantic-release">semantic-release</a> could simplify the workflow further but I haven&apos;t adopted it yet. </p>
<p>To make sure I get the right build artifacts out there in the current approach, I&apos;ve set up a couple of npm hooks like this:</p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ...
    <span class="token property">&quot;preversion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run test &amp;&amp; npm run lint &amp;&amp; npm run dist &amp;&amp; npm run dist-min &amp;&amp; git commit --allow-empty -am \&quot;</span>Update dist\<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;prepublish&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run dist-modules&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;postpublish&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run gh-pages &amp;&amp; npm run deploy-gh-pages&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;postinstall&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node lib/post_install.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><em>preversion</em> hook makes sure all tests pass, lint included, generates distribution builds, and includes those into a commit. I prefer to maintain the builds this way as it&apos;s convenient and I don&apos;t feel they bloat the repository too much. So far the approach has worked well.</p>
<p><em>prepublish</em> hook makes sure the npm version of the package gets generated. In short, it just triggers <a href="https://babeljs.io/">Babel</a> over the source and converts possible special features and JSX I&apos;m using into a form that&apos;s easy to consume from the Node.js world.</p>
<p><em>postpublish</em> generates the package site and pushes it to the <em>gh-pages</em> branch. The setup is isomorphic and it will convert the project <em>README.md</em> into a HTML structure. This was implemented to make sure the package page works even without JavaScript. There&apos;s also a minor SEO benefit. And you get to say that your boilerplate is isomorphic so there&apos;s that.</p>
<p><em>postinstall</em> portion is there to make sure that it is possible to consume the package through a GitHub reference (i.e., <code>bebraw/reactabular#hashgoeshere</code>). If I detect that there isn&apos;t expected directory, it will trigger <em>npm run dist-modules</em> just like the <em>prepublish</em> process does. The only problem is that the current solution supports only Node.js 0.12+. It would be possible to rewrite that if it becomes an issue.</p>
<h2 class="header"><a class="header-anchor" href="#pre-push-hook" id="pre-push-hook"></a><span class="text">Pre-push Hook</span><a class="header-anchor-select" href="#pre-push-hook">#</a></h2>
<p>Even though I have <a href="https://travis-ci.org/">Travis CI</a> set up and make it run my tests after each push, I&apos;ve gone a step further. I like to catch problems before a push. That&apos;s why I&apos;ve set up a pre-push hook through a package known as <a href="https://www.npmjs.com/package/git-prepush-hook">git-prepush-hook</a>. It writes the Git configuration to your repository when you install it. You can control its behavior through <em>package.json</em> by a declaration like this:</p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;pre-push&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;lint&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>You tell it what npm scripts to execute and it does that before a push. The biggest advantage of doing this is that it allows you to fix potential issues before they end up in public consumption. You can do the fix and then make it look as if you didn&apos;t make one through an interactive rebase (<code>git rebase -i</code>). It&apos;s one of those Git features that can help to keep your version history sane.</p>
<h2 class="header"><a class="header-anchor" href="#other-features" id="other-features"></a><span class="text">Other Features</span><a class="header-anchor-select" href="#other-features">#</a></h2>
<p>There&apos;s of course <a href="https://github.com/gaearon/babel-plugin-react-transform">React Transform</a> based hot loading. The Webpack configuration is a little elaborate but I&apos;ve done my best to keep it readable. You can find some usual React related optimizations there (mainly env). The isomorphic portion takes some code as well.</p>
<h2 class="header"><a class="header-anchor" href="#what-next-" id="what-next-"></a><span class="text">What Next?</span><a class="header-anchor-select" href="#what-next-">#</a></h2>
<p>I&apos;ve been thinking of pushing some of the common parts to a library of its own to ease the maintenance effort. This is the way <a href="https://www.npmjs.com/package/hjs-webpack">hjs-webpack</a> does it. The problem is that a boilerplate is a snapshot always. A library based approach would help in this regard. Most importantly, it would help to cut down the amount of dependencies.</p>
<p>I believe it could be valuable to adopt a tool such as <a href="https://commitizen.github.io/cz-cli/">commitizen</a>. That would make it easier to write meaningful Git commit messages. Even better, the tool can generate change logs for releases.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>I hope you&apos;ll find my little boilerplate useful. There might be some ideas there you could adopt for your own. Boilerplates are a little problematic maintenance-wise, but as mentioned, it might be possible to alleviate that by pushing the problem elsewhere.</p>
<p>Of course the situation is far worse if you don&apos;t have a boilerplate to begin with. Even a small project tends to require quite a few dependencies before you can become productive with it.</p>
</div></div><time datetime="2015-10-22T00:00:00.000Z" class="post__moment">22 Oct 2015</time><div class="post__author"><span>Published by Juho <a href="https://twitter.com/bebraw" class="twitter">@bebraw</a> VepsÃ¤lÃ¤inen</span></div><div class="social-links"><blockquote class="tip">If you enjoyed this blog post consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="clear"><input type="submit" class="btn button" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><a href="http://www.reactindiebundle.com/" target="_blank"><img src="/assets/img/rib_banner.png" alt="React Indie Bundle" class="banner" width="750"/></a><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/assets/img/baobab.jpg);"></div><span class="new-prevnext__info">Previous post</span><a class="new-prevnext__link" href="/blog/baobab-interview">Baobab - Data Trees with Cursors - Interview with Guillaume Plique</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/assets/img/bootstrap.jpg);"></div><span class="new-prevnext__info">Next post</span><a class="new-prevnext__link" href="/blog/react-bootstrap-interview">React-Bootstrap - Bootstrap Rebuilt for React - Interview with Matt Smith</a></div></div><div id="disqus_thread"></div></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a class="" href="/">Home</a></div><div class="nav__link"><a class="" href="/blog">Read the blog</a></div><div class="nav__link"><a class="" href="https://leanpub.com/survivejs_webpack">Buy the full ebook</a></div><div class="nav__link"><a class="" href=""></a></div><div class="nav__link"><a class="" href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><div class="right ribbon github-fork-ribbon-wrapper"><div class="github-fork-ribbon" style="background-color:black;"><a href="https://github.com/survivejs/webpack_react/issues/new?title=React Component Boilerplate v1.0 - " target="_blank">Submit feedback</a></div></div><footer><div class="footer-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank">Mailing List</a></li><li><a href="https://gitter.im/survivejs/webpack_react" target="_blank">Gitter Chat</a></li><li><a href="https://github.com/survivejs/webpack_react" target="_blank">GitHub</a></li><li><a href="/atom.xml" target="_blank">Blog RSS</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank">Contact</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/react-indie-bundle">React Indie Bundle - Summary</a></li><li><a class="blog-teaser" href="/blog/starhackit-interview">StarHackIt - A Full Stack ES6/ES7 Starter Kit based on React and Node - Interview with Frederic Heem</a></li><li><a class="blog-teaser" href="/blog/survivejs1910">SurviveJS - Webpack and React v1.9.10</a></li><li><a class="blog-teaser" href="/blog/react-router5">react-router5 - Routing Alternative for React - Interview with Thomas Roch</a></li><li><a class="blog-teaser" href="/blog/survivejs-195">SurviveJS - Webpack and React v1.9.5</a></li><li><a class="blog-teaser" href="/blog/baobab-interview">Baobab - Data Trees with Cursors - Interview with Guillaume Plique</a></li><li><a class="blog-teaser" href="/blog/react-component-boilerplate-10">React Component Boilerplate v1.0</a></li><li><a class="blog-teaser" href="/blog/react-bootstrap-interview">React-Bootstrap - Bootstrap Rebuilt for React - Interview with Matt Smith</a></li><li><a class="blog-teaser" href="/blog/survivejs-19">SurviveJS - Webpack and React v1.9.0</a></li><li><a class="blog-teaser" href="/blog/cerebral-interview">Cerebral - Expressing Application Flow with Signals - Interview with Christian Alfoni</a></li></ul></div></div></footer></main></body></html>