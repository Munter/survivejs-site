<html lang="en"><head><title>SurviveJS - Deploying to Production</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui"/><meta name="description" content="
There are two things you want to do preparing for a production build.

Configure a script to run in your package.json file
Create a production config

"/><meta name="keywords" content="webpack,react,javascript,programming,web development"/><link rel="icon" type="image/png" href="/assets/img/favicon.png"/><link rel="alternate" type="application/atom+xml" href="./atom.xml"/><link rel="stylesheet" href="/assets/main.css"/></head><body><main role="main"><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/assets/img/chapters/production.jpg);"></div><h1 class="post__heading">Deploying to Production</h1><div class="header-extra"><a href="https://pixabay.com/en/electric-electricity-building-1080584/">jarmoluk (Public Domain)</a></div><div class="toc-nav__wrapper"><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/introduction">Introduction</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/basics-of-webpack">Basics of Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/introduction-to-webpack">Introduction to Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/getting-started">Getting Started</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/running-a-workflow">Running a Workflow</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/automatic-browser-refresh">Automatic Browser Refresh</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/requiring-files">Requiring Files</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/css-fonts-and-images">CSS, Fonts, and Images</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading-css">Loading CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading-less-or-sass">Loading LESS or SASS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading-stylus-and-yeticss">Loading Stylus and YETICSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading-images">Loading Images</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading-svg">Loading SVG</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading-fonts">Loading Fonts</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/deployment-strategies">Deployment Strategies</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Deploying to Production</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/single-bundle">Single Bundle</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/splitting-app-and-vendors">Splitting app and vendors</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/chunking-in-webpack">Chunking in Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/understanding-chunks">Understanding Chunks</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/multiple-entry-points">Multiple Entry Points</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/lazy-loaded-entry-points">Lazy Loaded Entry Points</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/advanced-techniques">Advanced Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/authoring-libraries">Authoring Libraries</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/writing-loaders">Writing Loaders</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/optimization-techniques">Optimization Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing-development">Optimizing Development</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing-caching">Optimizing Caching</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing-rebundling">Optimizing Rebundling</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/react-techniques">React Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/configuring-react">Configuring React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/hot-loading-components">Hot Loading Components</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/type-checking-with-flow">Type Checking with Flow</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/universal-app">Universal App</a></li></ul></div><div class="chapter"><div class="post__content"><blockquote class="latestpost tip"><div>From the blog:</div><a class="latestpost-link" href="/blog/survivejs-interview">SurviveJS - Learn Webpack and React - Interview with Juho Vepsäläinen</a></blockquote><div class="chapter-content"><p>There are two things you want to do preparing for a production build.</p>
<ol>
<li>Configure a script to run in your package.json file</li>
<li>Create a production config</li>
</ol>
<h3 class="header"><a class="header-anchor" href="#creating-the-script" id="creating-the-script"></a><span class="text">Creating the script</span><a class="header-anchor-select" href="#creating-the-script">#</a></h3>
<p>We have already used <em>package.json</em> to create the <code>npm run dev</code> script. Now let us set up <code>npm run deploy</code>.</p>
<pre><code class="lang-json"><span class="token punctuation" >{</span>
  <span class="token property" >"name"</span><span class="token operator" >:</span> <span class="token string" >"my-project"</span><span class="token punctuation" >,</span>
  <span class="token property" >"version"</span><span class="token operator" >:</span> <span class="token string" >"0.0.0"</span><span class="token punctuation" >,</span>
  <span class="token property" >"description"</span><span class="token operator" >:</span> <span class="token string" >"My awesome project!"</span><span class="token punctuation" >,</span>
  <span class="token property" >"main"</span><span class="token operator" >:</span> <span class="token string" >"app/main.js"</span><span class="token punctuation" >,</span>
  <span class="token property" >"scripts"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
    <span class="token property" >"dev"</span><span class="token operator" >:</span> <span class="token string" >"webpack-dev-server --devtool eval --progress --colors --hot --content-base build"</span><span class="token punctuation" >,</span>
    <span class="token property" >"deploy"</span><span class="token operator" >:</span> <span class="token string" >"NODE_ENV=production webpack -p --config webpack.production.config.js"</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token property" >"author"</span><span class="token operator" >:</span> <span class="token string" >""</span><span class="token punctuation" >,</span>
  <span class="token property" >"license"</span><span class="token operator" >:</span> <span class="token string" >"ISC"</span><span class="token punctuation" >,</span>
  <span class="token property" >"devDependencies"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
    <span class="token property" >"webpack"</span><span class="token operator" >:</span> <span class="token string" >"^1.4.13"</span><span class="token punctuation" >,</span>
    <span class="token property" >"webpack-dev-server"</span><span class="token operator" >:</span> <span class="token string" >"^1.6.6"</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token property" >"dependencies"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>As you can see we are just running webpack with the production argument and pointing to a different configuration file. We also use the environment variable &quot;production&quot; to allow our required modules to do their optimizations. Lets us create the config file now.</p>
<h3 class="header"><a class="header-anchor" href="#creating-the-production-config" id="creating-the-production-config"></a><span class="text">Creating the production config</span><a class="header-anchor-select" href="#creating-the-production-config">#</a></h3>
<p>So there really is not much difference in creating the dev and production versions of your webpack config. You basically point to a different output path and there are no workflow configurations or optimizations. What you also want to bring into this configuration is cache handling.</p>
<pre><code class="lang-javascript"><span class="token keyword" >var</span> path <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'path'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token keyword" >var</span> node_modules_dir <span class="token operator" >=</span> path<span class="token punctuation" >.</span><span class="token function" >resolve</span><span class="token punctuation" >(</span>__dirname<span class="token punctuation" >,</span> <span class="token string" >'node_modules'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token keyword" >var</span> config <span class="token operator" >=</span> <span class="token punctuation" >{</span>
  entry<span class="token punctuation" >:</span> path<span class="token punctuation" >.</span><span class="token function" >resolve</span><span class="token punctuation" >(</span>__dirname<span class="token punctuation" >,</span> <span class="token string" >'app/main.js'</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
  output<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    path<span class="token punctuation" >:</span> path<span class="token punctuation" >.</span><span class="token function" >resolve</span><span class="token punctuation" >(</span>__dirname<span class="token punctuation" >,</span> <span class="token string" >'dist'</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
    filename<span class="token punctuation" >:</span> <span class="token string" >'bundle.js'</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  module<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    loaders<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token punctuation" >{</span>
      test<span class="token punctuation" >:</span> <span class="token regex" >/\.js$/</span><span class="token punctuation" >,</span>

      <span class="token comment" spellcheck="true">// There is not need to run the loader through</span>
      <span class="token comment" spellcheck="true">// vendors</span>
      exclude<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>node_modules_dir<span class="token punctuation" >]</span><span class="token punctuation" >,</span>
      loader<span class="token punctuation" >:</span> <span class="token string" >'babel'</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>

module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> config<span class="token punctuation" >;</span>
</code></pre>
<h3 class="header"><a class="header-anchor" href="#doing-the-deploy" id="doing-the-deploy"></a><span class="text">Doing the deploy</span><a class="header-anchor-select" href="#doing-the-deploy">#</a></h3>
<p>Run <code>npm run deploy</code> in the root of the project. Webpack will now run in production mode. It does some optimizations on its own, but also React JS will do its optimizations. Look into caching for even more production configuration.</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this chapter consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><h2 class="subscribe-header">Subscribe to the mailing list</h2><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group social-input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-subscribe-container"><input type="submit" class="btn button social-subscribe" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/assets/img/chapters/boots.jpg);"></div><span class="new-prevnext__info">Previous chapter</span><a class="new-prevnext__link" href="/webpack/deployment-strategies">Deployment Strategies</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/assets/img/chapters/bundle.jpg);"></div><span class="new-prevnext__info">Next chapter</span><a class="new-prevnext__link" href="/webpack/single-bundle">Single Bundle</a></div></div><div id="disqus_thread"></div></div><div><a class="next-page" title="Single Bundle" href="/webpack/single-bundle"><i class="icon-right-open"></i></a><a class="previous-page" title="Deployment Strategies" href="/webpack/deployment-strategies"><i class="icon-left-open"></i></a></div></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a class="" href="/">Home</a></div><div class="nav__link"><a class="" href="/blog">Read the blog</a></div><div class="nav__link"><a class="" href="https://leanpub.com/survivejs_webpack">Buy the full ebook</a></div><div class="nav__link"><a class="" href=""></a></div><div class="nav__link"><a class="" href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><div class="right ribbon github-fork-ribbon-wrapper"><div class="github-fork-ribbon" style="background-color:black;"><a href="https://github.com/survivejs/webpack_react/issues/new?title=Deploying to Production - " target="_blank">Submit feedback</a></div></div><footer><div class="footer-wrapper"><div class="footer-content-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank">Mailing List</a></li><li><a href="https://gitter.im/survivejs/webpack_react" target="_blank">Gitter Chat</a></li><li><a href="https://github.com/survivejs/webpack_react" target="_blank">GitHub</a></li><li><a href="/atom.xml" target="_blank">Blog RSS</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank">Contact</a></li><li><a href="https://github.com/survivejs/ama/issues" target="_blank">Ask Me Anything</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/survivejs-interview">SurviveJS - Learn Webpack and React - Interview with Juho Vepsäläinen</a></li><li><a class="blog-teaser" href="/blog/styleguidist-interview">react-styleguidist - Style guide generator for React - Interview with Artem Sapegin</a></li><li><a class="blog-teaser" href="/blog/survivejs200">SurviveJS - Webpack and React - v2.0.0</a></li><li><a class="blog-teaser" href="/blog/survivejs200-rc4">SurviveJS - Webpack and React - v2.0.0-rc4</a></li><li><a class="blog-teaser" href="/blog/towards-common-components">Towards a Common Component Definition</a></li><li><a class="blog-teaser" href="/blog/survivejs200-rc3">SurviveJS - Webpack and React - v2.0.0-rc3</a></li><li><a class="blog-teaser" href="/blog/survivejs200-rc2">SurviveJS - Webpack and React - v2.0.0-rc2</a></li><li><a class="blog-teaser" href="/blog/survivejs200-rc1">SurviveJS - Webpack and React - v2.0.0-rc1</a></li><li><a class="blog-teaser" href="/blog/codemod-interview">Codemod - Refactoring Code Programmatically - Interview with Ramana Venkata</a></li><li><a class="blog-teaser" href="/blog/2015-recap">2015 Recap</a></li></ul></div></div></div></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
            ((window.gitter = {}).chat = {}).options = {
              showChatByDefault: false,
              activationElement: '.gitter-open-chat-button',
              room: 'survivejs/webpack_react'
            };
          </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div></main></body></html>