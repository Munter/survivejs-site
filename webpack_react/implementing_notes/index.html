<html lang="en"><head><title>SurviveJS - Implementing a Basic Note Application</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui"/><meta name="description" content="
Given we have a nice development setup now, we can actually get some work done. Our goal here is to end up with a crude note taking application. It will have basic manipulation operations. We will grow our application from scratch and get into some trouble. This way you will understand why architecâ€¦"/><meta name="keywords" content="webpack,react,javascript,programming,web development"/><link rel="icon" type="image/png" href="/assets/img/favicon.png"/><link rel="alternate" type="application/atom+xml" href="./atom.xml"/><link rel="stylesheet" href="/assets/main.css"/></head><body><main role="main"><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/images/notes.jpg);"></div><h1 class="post__heading">Implementing a Basic Note Application</h1><div class="header-extra"><a href="https://www.flickr.com/photos/73635318@N00/2663422833">Angela (CC BY-NC-SA)</a></div><div class="toc-nav__wrapper"><h4 class="toc-nav--header">Table of Contents</h4><div class="toc-nav"><a class="toc-nav__link chapter" href="/webpack_react/introduction">Introduction</a><a class="toc-nav__link part" href="/webpack_react/webpack">Setting Up Webpack</a><a class="toc-nav__link chapter" href="/webpack_react/webpack_compared">Webpack Compared</a><a class="toc-nav__link chapter" href="/webpack_react/developing_with_webpack">Developing with Webpack</a><a class="toc-nav__link chapter" href="/webpack_react/webpack_and_react">Webpack and React</a><a class="toc-nav__link part" href="/webpack_react/react">Developing Kanban Application</a><span class="toc-nav__link toc-nav__link--current chapter">Implementing a Basic Note Application</span><a class="toc-nav__link chapter" href="/webpack_react/react_and_flux">React and Flux</a><a class="toc-nav__link chapter" href="/webpack_react/from_notes_to_kanban">From Notes to Kanban</a><a class="toc-nav__link chapter" href="/webpack_react/implementing_dnd">Implementing Drag and Drop</a><a class="toc-nav__link chapter" href="/webpack_react/building_kanban">Building Kanban</a><a class="toc-nav__link part" href="/webpack_react/advanced">Advanced Techniques</a><a class="toc-nav__link chapter" href="/webpack_react/testing_react">Testing React*</a><a class="toc-nav__link chapter" href="/webpack_react/typing_with_react">Typing with React*</a><a class="toc-nav__link chapter" href="/webpack_react/linting_in_webpack">Linting in Webpack</a><a class="toc-nav__link chapter" href="/webpack_react/authoring_libraries">Authoring Libraries</a><a class="toc-nav__link chapter" href="/webpack_react/styling_react">Styling React</a><a class="toc-nav__link part" href="/webpack_react/appendices">Appendices</a><a class="toc-nav__link chapter" href="/webpack_react/structuring_react_projects">Structuring React Projects</a><a class="toc-nav__link chapter" href="/webpack_react/language_features">Language Features</a><a class="toc-nav__link chapter" href="/webpack_react/understanding_decorators">Understanding Decorators</a><a class="toc-nav__link chapter" href="/webpack_react/troubleshooting">Troubleshooting</a></div><div class="resources__wrapper"><h4 class="resources--header">Resources</h4><div class="resources-nav"><a href="https://medium.com/@skwee357/the-land-of-undocumented-react-js-the-context-99b3f931ff73" class="resource-nav__link" target="_blank">The land of undocumented react.js: The Context</a></div></div></div><div class="chapter"><div class="post__content"><blockquote class="front__latestpost tip"><div>From the blog:</div><a class="front__latestpost-link" href="/blog/survivejs200-rc3">SurviveJS - Webpack and React v2.0.0-rc3</a></blockquote><div class="post__meta"><a class="post__end_source" href="https://github.com/survivejs/webpack_react/tree/master/project_source/04_implementing_notes/kanban_app" target="_blank">Finished source code</a><a class="post__demo" href="/demos/04_implementing_notes" target="_blank">Demo</a></div><div class="chapter-content"><p>Given we have a nice development setup now, we can actually get some work done. Our goal here is to end up with a crude note taking application. It will have basic manipulation operations. We will grow our application from scratch and get into some trouble. This way you will understand why architectures, such as Flux, are needed.</p>
<blockquote class="warning">Hot loading isn&#39;t foolproof always. Given it operates by swapping methods dynamically, it won&#39;t catch every change. This is problematic with property initializers and <code>bind</code>. This means you may need to force a manual refresh at the browser for some changes to show up!</blockquote><h2 class="header"><a class="header-anchor" href="#initial-data-model" id="initial-data-model"></a><span class="text">Initial Data Model</span><a class="header-anchor-select" href="#initial-data-model">#</a></h2>
<p>Often a good way to begin designing an application is to start with the data. We could model a list of notes as follows:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >[</span>
  <span class="token punctuation" >{</span>
    id<span class="token punctuation" >:</span> <span class="token string" >'4a068c42-75b2-4ae2-bd0d-284b4abbb8f0'</span><span class="token punctuation" >,</span>
    task<span class="token punctuation" >:</span> <span class="token string" >'Learn Webpack'</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >{</span>
    id<span class="token punctuation" >:</span> <span class="token string" >'4e81fc6e-bfb6-419b-93e5-0242fb6f3f6a'</span><span class="token punctuation" >,</span>
    task<span class="token punctuation" >:</span> <span class="token string" >'Learn React'</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >{</span>
    id<span class="token punctuation" >:</span> <span class="token string" >'11bbffc8-5891-4b45-b9ea-5c99aadf870f'</span><span class="token punctuation" >,</span>
    task<span class="token punctuation" >:</span> <span class="token string" >'Do laundry'</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >]</span><span class="token punctuation" >;</span>
</code></pre>
<p>Each note is an object which will contain the data we need, including an <code>id</code> and a <code>task</code> we want to perform. Later on it is possible to extend this data definition to include things like the note color or the owner.</p>
<h2 class="header"><a class="header-anchor" href="#on-ids" id="on-ids"></a><span class="text">On Ids</span><a class="header-anchor-select" href="#on-ids">#</a></h2>
<p>We could have skipped ids in our definition. This would become problematic as we grow our application, though. If you are referring to data based on array indices and the data changes, each reference has to change too. We can avoid that.</p>
<p>Normally the problem is solved by a back-end. As we don&#39;t have one yet, we&#39;ll need to improvise something. A standard known as <a href="https://www.ietf.org/rfc/rfc4122.txt">RFC4122</a> allows us to generate unique ids. We&#39;ll be using a Node.js implementation known as <em>node-uuid</em>. Invoke</p>
<pre><code class="lang-bash">npm i node-uuid --save
</code></pre>
<p>at the project root to get it installed.</p>
<p>If you open up the Node.js CLI (<code>node</code>) and try the following, you can see what kind of ids it outputs.</p>
<pre><code class="lang-javascript"><span class="token operator" >></span> uuid <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'node-uuid'</span><span class="token punctuation" >)</span>
<span class="token punctuation" >{</span> <span class="token punctuation" >[</span>Function<span class="token punctuation" >:</span> v4<span class="token punctuation" >]</span>
  v1<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>Function<span class="token punctuation" >:</span> v1<span class="token punctuation" >]</span><span class="token punctuation" >,</span>
  v4<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>Circular<span class="token punctuation" >]</span><span class="token punctuation" >,</span>
  parse<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>Function<span class="token punctuation" >:</span> parse<span class="token punctuation" >]</span><span class="token punctuation" >,</span>
  unparse<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>Function<span class="token punctuation" >:</span> unparse<span class="token punctuation" >]</span><span class="token punctuation" >,</span>
  BufferClass<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>Function<span class="token punctuation" >:</span> Array<span class="token punctuation" >]</span> <span class="token punctuation" >}</span>
<span class="token operator" >></span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span>
<span class="token string" >'1c8e7a12-0b4c-4f23-938c-00d7161f94fc'</span>
</code></pre>
<blockquote class="tip">You can exit Node.js CLI by hitting <strong>CTRL-D</strong> once.</blockquote><p><code>uuid.v4()</code> will help us to generate the ids we need for the purposes of this project. It is guaranteed to return a unique id with a high probability.</p>
<p>If you are interested in the math behind this, check out <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier#Random_UUID_probability_of_duplicates">the calculations at Wikipedia</a> for details. You&#39;ll see that the possibility for collisions is somewhat miniscule and something we don&#39;t have to worry about.</p>
<h2 class="header"><a class="header-anchor" href="#connecting-data-with-app-" id="connecting-data-with-app-"></a><span class="text">Connecting Data with <code>App</code></span><a class="header-anchor-select" href="#connecting-data-with-app-">#</a></h2>
<p>Next, we need to connect our data model with <code>App</code>. The simplest way to achieve that is to push the data directly to <code>render()</code> for now. This won&#39;t be efficient, but it will allow us to get started. The implementation below shows how this works out in React terms:</p>
<p><strong>app/components/App.jsx</strong></p>
<pre><code class="lang-javascript"><div class="leanpub-insert">
<span class="token keyword" >import</span> uuid <span class="token keyword" >from</span> <span class="token string" >'node-uuid'</span><span class="token punctuation" >;</span>
</div>
<span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<div class="leanpub-delete">
<span class="token keyword" >import</span> Note <span class="token keyword" >from</span> <span class="token string" >'./Note.jsx'</span><span class="token punctuation" >;</span>
</div>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >App</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
<div class="leanpub-insert">
    <span class="token keyword" >const</span> notes <span class="token operator" >=</span> <span class="token punctuation" >[</span>
      <span class="token punctuation" >{</span>
        id<span class="token punctuation" >:</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
        task<span class="token punctuation" >:</span> <span class="token string" >'Learn Webpack'</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >{</span>
        id<span class="token punctuation" >:</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
        task<span class="token punctuation" >:</span> <span class="token string" >'Learn React'</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >{</span>
        id<span class="token punctuation" >:</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
        task<span class="token punctuation" >:</span> <span class="token string" >'Do laundry'</span>
      <span class="token punctuation" >}</span>
    <span class="token punctuation" >]</span><span class="token punctuation" >;</span>
</div>

<div class="leanpub-delete">
    <span class="token keyword" >return</span> <span class="token operator" >&lt;</span>Note <span class="token operator" >/</span><span class="token operator" >></span><span class="token punctuation" >;</span>
</div>
<div class="leanpub-insert">
    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
        <span class="token operator" >&lt;</span>ul<span class="token operator" >></span><span class="token punctuation" >{</span>notes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span>note <span class="token operator" >=</span><span class="token operator" >></span>
          <span class="token operator" >&lt;</span>li key<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>id<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>li<span class="token operator" >></span>
        <span class="token punctuation" >)</span><span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>ul<span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>We are using various important features of React in the snippet above. Understanding them is invaluable. I have annotated important parts below:</p>
<ul>
<li><code>&lt;ul&gt;{notes.map(note =&gt; ...}&lt;/ul&gt;</code> - <code>{}</code>&#39;s allow us to mix JavaScript syntax within JSX. <code>map</code> returns a list of <code>li</code> elements for React to render.</li>
<li><code>&lt;li key={note.id}&gt;{note.task}&lt;/li&gt;</code> - In order to tell React in which order to render the elements, we use the <code>key</code> property. It is important that this is unique or else React won&#39;t be able to figure out the correct order in which to render. If not set, React will give a warning. See <a href="https://facebook.github.io/react/docs/multiple-components.html">Multiple Components</a> for more information.</li>
</ul>
<blockquote class="tip">You can import portions from <code>react</code> using syntax <code>import React, {Component} from &#39;react&#39;;</code>. Then you can do <code>class App extends Component</code>. You may find this alternative a little neater.</blockquote><p>If you run the application now, you can see a list of notes. It&#39;s not particularly pretty, but it&#39;s something:</p>
<p><img src="/images/react_03.png" alt="A list of notes"></p>
<blockquote class="tip">If you want to attach comments to your JSX, just use <code>{/* no comments */}</code>.</blockquote><blockquote class="tip">If you want to examine your application further, it can be useful to attach a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/debugger">debugger;</a> statement to the place you want to study. It has to be placed on a line that will get executed for the browser to pick it up! The statement will cause the browser debugging tools to trigger and allow you to study the current call stack and scope. You can attach breakpoints like this through the browser, but this is a good alternative.</blockquote><h2 class="header"><a class="header-anchor" href="#adding-new-items-to-the-list" id="adding-new-items-to-the-list"></a><span class="text">Adding New Items to the List</span><a class="header-anchor-select" href="#adding-new-items-to-the-list">#</a></h2>
<p>Adding more items to the list would be a good starting point for further development. Currently the state of our application is tied to <code>render()</code>. In order to make it possible to modify it, we&#39;ll need to convert it into component <em>state</em>. After that, we can define operations to alter it. As the state changes, React will update the list automatically for us. In React terms, state definition looks like this:</p>
<p><strong>app/components/App.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >App</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
<div class="leanpub-insert">
  <span class="token function" >constructor</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >super</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    <span class="token keyword" >this</span><span class="token punctuation" >.</span>state <span class="token operator" >=</span> <span class="token punctuation" >{</span>
      notes<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
        <span class="token punctuation" >{</span>
          id<span class="token punctuation" >:</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
          task<span class="token punctuation" >:</span> <span class="token string" >'Learn Webpack'</span>
        <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
        <span class="token punctuation" >{</span>
          id<span class="token punctuation" >:</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
          task<span class="token punctuation" >:</span> <span class="token string" >'Learn React'</span>
        <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
        <span class="token punctuation" >{</span>
          id<span class="token punctuation" >:</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
          task<span class="token punctuation" >:</span> <span class="token string" >'Do laundry'</span>
        <span class="token punctuation" >}</span>
      <span class="token punctuation" >]</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
</div>
  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
<div class="leanpub-delete">
    <span class="token keyword" >const</span> notes <span class="token operator" >=</span> <span class="token punctuation" >[</span>
      <span class="token punctuation" >{</span>
        id<span class="token punctuation" >:</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
        task<span class="token punctuation" >:</span> <span class="token string" >'Learn Webpack'</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >{</span>
        id<span class="token punctuation" >:</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
        task<span class="token punctuation" >:</span> <span class="token string" >'Learn React'</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >{</span>
        id<span class="token punctuation" >:</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
        task<span class="token punctuation" >:</span> <span class="token string" >'Do laundry'</span>
      <span class="token punctuation" >}</span>
    <span class="token punctuation" >]</span><span class="token punctuation" >;</span>
</div>
<div class="leanpub-insert">
    <span class="token keyword" >const</span> notes <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>notes<span class="token punctuation" >;</span>
</div>

    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>After this change and refreshing the browser, our application works the same way as before. We have gained something in return, though. We can now begin to alter the state.</p>
<p>In the earlier versions of React, you achieved the same result with <code>getInitialState</code>. We&#39;re passing <code>props</code> to <code>super</code> by convention. If you don&#39;t pass it, <code>this.props</code> won&#39;t get set! Calling <code>super</code> invokes the same method of the parent class and you see this kind of usage in object oriented programming often.</p>
<blockquote class="warning">Note that <em>babel-plugin-react-transform</em> doesn&#39;t pick up changes made to the constructor. Technically it just replaces methods. As a result, the constructor won&#39;t get invoked. You will have to force a refresh in this case!</blockquote><h3 class="header"><a class="header-anchor" href="#defining-addnote-handler" id="defining-addnote-handler"></a><span class="text">Defining <code>addNote</code> Handler</span><a class="header-anchor-select" href="#defining-addnote-handler">#</a></h3>
<p>Now that we have state, we can begin to modify it. A good way to achieve this is to add a simple button to <code>App</code> and then trigger <code>this.setState</code> to force React to alter the state and trigger <code>render()</code>. This method is asynchronous. React deals with the virtual DOM related details for you:</p>
<p><strong>app/components/App.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >App</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
  <span class="token function" >constructor</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token punctuation" >}</span>
  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> notes <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>notes<span class="token punctuation" >;</span>

    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
<div class="leanpub-insert">
        <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>addNote<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token operator" >+</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
</div>
        <span class="token operator" >&lt;</span>ul<span class="token operator" >></span><span class="token punctuation" >{</span>notes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span>note <span class="token operator" >=</span><span class="token operator" >></span>
          <span class="token operator" >&lt;</span>li key<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>id<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>li<span class="token operator" >></span>
        <span class="token punctuation" >)</span><span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>ul<span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
<div class="leanpub-insert">
  <span class="token comment" spellcheck="true">// We are using an experimental feature known as property</span>
  <span class="token comment" spellcheck="true">// initializer here. It allows us to bind the method `this`</span>
  <span class="token comment" spellcheck="true">// to point at our *App* instance.</span>
  <span class="token comment" spellcheck="true">//</span>
  <span class="token comment" spellcheck="true">// Alternatively we could `bind` at `constructor` using</span>
  <span class="token comment" spellcheck="true">// a line, such as this.addNote = this.addNote.bind(this);</span>
  addNote <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// It would be possible to write this in an imperative style.</span>
    <span class="token comment" spellcheck="true">// I.e., through `this.state.notes.push` and then</span>
    <span class="token comment" spellcheck="true">// `this.setState({notes: this.state.notes})` to commit.</span>
    <span class="token comment" spellcheck="true">//</span>
    <span class="token comment" spellcheck="true">// I tend to favor functional style whenever that makes sense.</span>
    <span class="token comment" spellcheck="true">// Even though it might take more code sometimes, I feel</span>
    <span class="token comment" spellcheck="true">// the benefits (easy to reason about, no side effects)</span>
    <span class="token comment" spellcheck="true">// more than make up for it.</span>
    <span class="token comment" spellcheck="true">//</span>
    <span class="token comment" spellcheck="true">// Libraries, such as Immutable.js, go a notch further.</span>
    <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      notes<span class="token punctuation" >:</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>notes<span class="token punctuation" >.</span><span class="token function" >concat</span><span class="token punctuation" >(</span><span class="token punctuation" >[</span><span class="token punctuation" >{</span>
        id<span class="token punctuation" >:</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
        task<span class="token punctuation" >:</span> <span class="token string" >'New task'</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >]</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
</div>
<span class="token punctuation" >}</span>
</code></pre>
<p>If we were operating with a back-end, we would trigger a query here and capture the id from the response. For now it&#39;s enough to just generate an entry and a custom id.</p>
<p>If you refresh the browser and click the plus button now, you should see a new item at the list:</p>
<p><img src="/images/react_05.png" alt="Notes with plus"></p>
<p>We are still missing two crucial features: editing and deletion. Before moving onto these, it&#39;s a good idea to make room for them by expanding our component hierarchy. It will become easier to deal with the features after that. Working with React is like this. You develop a component for a while until you realize it could be split up further.</p>
<blockquote class="tip"><code>this.setState</code> accepts a second parameter like this: <code>this.setState({...}, () =&gt; console.log(&#39;set state!&#39;))</code>. This is handy to know if you want to trigger some behavior right after <code>setState</code> has completed.</blockquote><blockquote class="tip">You could use <code>[...this.state.notes, {id: uuid.v4(), task: &#39;New task&#39;}]</code> to achieve the same result. This <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator">spread operator</a> can be used with function parameters as well.</blockquote><h2 class="header"><a class="header-anchor" href="#improving-component-hierarchy" id="improving-component-hierarchy"></a><span class="text">Improving Component Hierarchy</span><a class="header-anchor-select" href="#improving-component-hierarchy">#</a></h2>
<p>Our current, one component based setup isn&#39;t going to take us far. By looking at our application, we can see there&#39;s a component hierarchy like this:</p>
<ul>
<li><code>App</code> - <code>App</code> retains application state and deals with the high level logic.</li>
<li><code>Notes</code> - <code>Notes</code> acts as an intermediate in between and renders individual <code>Note</code> components.</li>
<li><code>Note</code> - <code>Note</code> is the workhorse of our application. Editing and deletion will be triggered here. That logic will cascade to <code>App</code> through wiring.</li>
</ul>
<p>The interesting side benefit of this arrangement is that it allows us to create multiple <code>Notes</code> lists per <code>App</code>. Earlier, this would have become messy. Later on we can introduce the concepts of <code>Lane</code> and <code>Lanes</code> to the hierarchy.</p>
<h3 class="header"><a class="header-anchor" href="#extracting-note-" id="extracting-note-"></a><span class="text">Extracting <code>Note</code></span><a class="header-anchor-select" href="#extracting-note-">#</a></h3>
<p>A good first step towards the hierarchy we want is to extract <code>Note</code>. <code>Note</code> is a component which will need to receive <code>task</code> as a <em>prop</em> and render it as below:</p>
<p><strong>app/components/Note.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>

<div class="leanpub-delete">
<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token operator" >&lt;</span>div<span class="token operator" >></span>Learn Webpack<span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span><span class="token punctuation" >;</span>
</div>
<div class="leanpub-insert">
<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>task<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token operator" >&lt;</span>div<span class="token operator" >></span><span class="token punctuation" >{</span>task<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span><span class="token punctuation" >;</span>
</div>
</code></pre>
<blockquote class="tip"><code>{task}</code> allows us to extract the specific prop we want from the passed props easily. We&#39;ll be using the same <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Object_destructuring">destructuring syntax</a> in other places as well.</blockquote><p>We should tweak <code>App</code> to connect the component with it:</p>
<p><strong>app/components/App.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> uuid <span class="token keyword" >from</span> <span class="token string" >'node-uuid'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<div class="leanpub-insert">
<span class="token keyword" >import</span> Note <span class="token keyword" >from</span> <span class="token string" >'./Note.jsx'</span><span class="token punctuation" >;</span>
</div>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >App</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
  <span class="token function" >constructor</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token punctuation" >}</span>
  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> notes <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>notes<span class="token punctuation" >;</span>

    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
        <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>addNote<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token operator" >+</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
        <span class="token operator" >&lt;</span>ul<span class="token operator" >></span><span class="token punctuation" >{</span>notes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span>note <span class="token operator" >=</span><span class="token operator" >></span>
<div class="leanpub-delete">
          <span class="token operator" >&lt;</span>li key<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>id<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>li<span class="token operator" >></span>
</div>
<div class="leanpub-insert">
          <span class="token operator" >&lt;</span>li key<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>id<span class="token punctuation" >}</span><span class="token operator" >></span>
            <span class="token operator" >&lt;</span>Note task<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
          <span class="token operator" >&lt;</span><span class="token operator" >/</span>li<span class="token operator" >></span>
</div>
        <span class="token punctuation" >)</span><span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>ul<span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
  addNote <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      notes<span class="token punctuation" >:</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>notes<span class="token punctuation" >.</span><span class="token function" >concat</span><span class="token punctuation" >(</span><span class="token punctuation" >[</span><span class="token punctuation" >{</span>
        id<span class="token punctuation" >:</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
        task<span class="token punctuation" >:</span> <span class="token string" >'New task'</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >]</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>The application should still look the same. To achieve the structure we are after, we should perform one more tweak and extract <code>Notes</code>.</p>
<h3 class="header"><a class="header-anchor" href="#extracting-notes-" id="extracting-notes-"></a><span class="text">Extracting <code>Notes</code></span><a class="header-anchor-select" href="#extracting-notes-">#</a></h3>
<p>Extracting <code>Notes</code> is a similar operation. We need to understand what portion of <code>App</code> belongs to the component and then write a definition for it:</p>
<p><strong>app/components/Notes.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> Note <span class="token keyword" >from</span> <span class="token string" >'./Note.jsx'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
    <span class="token operator" >&lt;</span>ul<span class="token operator" >></span><span class="token punctuation" >{</span>notes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span>note <span class="token operator" >=</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span>li key<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>id<span class="token punctuation" >}</span><span class="token operator" >></span>
        <span class="token operator" >&lt;</span>Note task<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>li<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>ul<span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>In addition, we need to connect <code>App</code> with the new definition:</p>
<p><strong>app/components/App.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> uuid <span class="token keyword" >from</span> <span class="token string" >'node-uuid'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<div class="leanpub-delete">
<span class="token keyword" >import</span> Note <span class="token keyword" >from</span> <span class="token string" >'./Note.jsx'</span><span class="token punctuation" >;</span>
</div>
<div class="leanpub-insert">
<span class="token keyword" >import</span> Notes <span class="token keyword" >from</span> <span class="token string" >'./Notes.jsx'</span><span class="token punctuation" >;</span>
</div>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >App</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
  <span class="token function" >constructor</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token punctuation" >}</span>
  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> notes <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>notes<span class="token punctuation" >;</span>

    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
        <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>addNote<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token operator" >+</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
<div class="leanpub-delete">
        <span class="token operator" >&lt;</span>ul<span class="token operator" >></span><span class="token punctuation" >{</span>notes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span>note <span class="token operator" >=</span><span class="token operator" >></span>
          <span class="token operator" >&lt;</span>li key<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>id<span class="token punctuation" >}</span><span class="token operator" >></span>
            <span class="token operator" >&lt;</span>Note task<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
          <span class="token operator" >&lt;</span><span class="token operator" >/</span>li<span class="token operator" >></span>
        <span class="token punctuation" >)</span><span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>ul<span class="token operator" >></span>
</div>
<div class="leanpub-insert">
        <span class="token operator" >&lt;</span>Notes notes<span class="token operator" >=</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
</div>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
  addNote <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      notes<span class="token punctuation" >:</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>notes<span class="token punctuation" >.</span><span class="token function" >concat</span><span class="token punctuation" >(</span><span class="token punctuation" >[</span><span class="token punctuation" >{</span>
        id<span class="token punctuation" >:</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
        task<span class="token punctuation" >:</span> <span class="token string" >'New task'</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >]</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>The application should still behave the same way. Structurally we are far better off than before. Now we can begin to worry about adding new functionality to the system.</p>
<h2 class="header"><a class="header-anchor" href="#editing-notes-" id="editing-notes-"></a><span class="text">Editing <code>Notes</code></span><a class="header-anchor-select" href="#editing-notes-">#</a></h2>
<p>In order to edit individual <code>Note</code>s, we should set up some hooks for that. Logically the following could happen:</p>
<ol>
<li>The user clicks a <code>Note</code>.</li>
<li><code>Note</code> renders itself as input showing its current value.</li>
<li>The user confirms the modification (<code>blur</code> event or <em>enter</em> key is pressed).</li>
<li><code>Note</code> renders the new value.</li>
</ol>
<p>This means <code>Note</code> will need to track its <code>editing</code> state somehow. In addition, we need to communicate that value (<code>task</code>) has changed so that <code>App</code> knows to update its state. Resolving these two problems gives us something functional.</p>
<h3 class="header"><a class="header-anchor" href="#tracking-note-editing-state" id="tracking-note-editing-state"></a><span class="text">Tracking <code>Note</code> <code>editing</code> State</span><a class="header-anchor-select" href="#tracking-note-editing-state">#</a></h3>
<p>Just as earlier with <code>App</code>, we need to deal with state again. This means a function based component won&#39;t be enough anymore. Instead, we need to convert it to a heavier format. For the sake of consistency I&#39;ll be using the same component definition style as with <code>App</code>. In addition, we need to alter the <code>editing</code> state based on the user behavior, and finally render the right element based on it. Here&#39;s what this means in terms of React:</p>
<p><strong>app/components/Note.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >Note</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
  <span class="token function" >constructor</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >super</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    <span class="token comment" spellcheck="true">// Track `editing` state.</span>
    <span class="token keyword" >this</span><span class="token punctuation" >.</span>state <span class="token operator" >=</span> <span class="token punctuation" >{</span>
      editing<span class="token punctuation" >:</span> <span class="token boolean" >false</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// Render the component differently based on state.</span>
    <span class="token keyword" >if</span><span class="token punctuation" >(</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>editing<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >return</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >renderEdit</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span>

    <span class="token keyword" >return</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >renderNote</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
  renderEdit <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// Deal with blur and input handlers. These map to DOM events.</span>
    <span class="token comment" spellcheck="true">// We set selection to input end using a callback at ref. It gets</span>
    <span class="token comment" spellcheck="true">// triggered after the component is mounted.</span>
    <span class="token comment" spellcheck="true">//</span>
    <span class="token comment" spellcheck="true">// We could also use a string reference (i.e., `ref="input") and</span>
    <span class="token comment" spellcheck="true">// then refer to the element in question later in the code. This</span>
    <span class="token comment" spellcheck="true">// would allow us to use the underlying DOM API.</span>
    <span class="token keyword" >return</span> <span class="token operator" >&lt;</span>input type<span class="token operator" >=</span><span class="token string" >"text"</span>
      ref<span class="token operator" >=</span><span class="token punctuation" >{</span>
        <span class="token punctuation" >(</span>e<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> e <span class="token operator" >?</span> e<span class="token punctuation" >.</span>selectionStart <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>task<span class="token punctuation" >.</span>length <span class="token punctuation" >:</span> <span class="token keyword" >null</span>
      <span class="token punctuation" >}</span>
      autoFocus<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token boolean" >true</span><span class="token punctuation" >}</span>
      defaultValue<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span>
      onBlur<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>finishEdit<span class="token punctuation" >}</span>
      onKeyPress<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>checkEnter<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  renderNote <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// If the user clicks a normal note, trigger editing logic.</span>
    <span class="token keyword" >return</span> <span class="token operator" >&lt;</span>div onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>edit<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  edit <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// Enter edit mode.</span>
    <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      editing<span class="token punctuation" >:</span> <span class="token boolean" >true</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  checkEnter <span class="token operator" >=</span> <span class="token punctuation" >(</span>e<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// The user hit *enter*, let's finish up.</span>
    <span class="token keyword" >if</span><span class="token punctuation" >(</span>e<span class="token punctuation" >.</span>key <span class="token operator" >===</span> <span class="token string" >'Enter'</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >finishEdit</span><span class="token punctuation" >(</span>e<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  finishEdit <span class="token operator" >=</span> <span class="token punctuation" >(</span>e<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// `Note` will trigger an optional `onEdit` callback once it</span>
    <span class="token comment" spellcheck="true">// has a new value. We will use this to communicate the change to</span>
    <span class="token comment" spellcheck="true">// `App`.</span>
    <span class="token comment" spellcheck="true">//</span>
    <span class="token comment" spellcheck="true">// A smarter way to deal with the default value would be to set</span>
    <span class="token comment" spellcheck="true">// it through `defaultProps`.</span>
    <span class="token comment" spellcheck="true">//</span>
    <span class="token comment" spellcheck="true">// See *Typing with React* chapter for more information.</span>
    <span class="token keyword" >const</span> value <span class="token operator" >=</span> e<span class="token punctuation" >.</span>target<span class="token punctuation" >.</span>value<span class="token punctuation" >;</span>

    <span class="token keyword" >if</span><span class="token punctuation" >(</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>onEdit <span class="token operator" >&amp;&amp;</span> value<span class="token punctuation" >.</span><span class="token function" >trim</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span><span class="token function" >onEdit</span><span class="token punctuation" >(</span>value<span class="token punctuation" >)</span><span class="token punctuation" >;</span>

      <span class="token comment" spellcheck="true">// Exit edit mode.</span>
      <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
        editing<span class="token punctuation" >:</span> <span class="token boolean" >false</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>If you try to edit a <code>Note</code> now, you should see an input. In order to do something useful with the value, we&#39;ll need to define <code>onEdit</code> so that we can update <code>App</code> state and actually commit the changes to memory.</p>
<blockquote class="tip">It is a good idea to name your callbacks using <code>on</code> prefix. This will allow you to distinguish them from other props and keep your code a little tidier.</blockquote><h3 class="header"><a class="header-anchor" href="#communicating-note-state-changes" id="communicating-note-state-changes"></a><span class="text">Communicating <code>Note</code> State Changes</span><a class="header-anchor-select" href="#communicating-note-state-changes">#</a></h3>
<p>Given we are currently dealing with the logic at <code>App</code>, we can deal with <code>onEdit</code> there as well. We will need to trigger this callback at <code>Note</code> and delegate the result to <code>App</code> level. The diagram below illustrates the idea and how we are going to bind the data:</p>
<p><img src="/images/bind.png" alt="`onEdit` flow"></p>
<p>A good first step towards this behavior is to create a stub. As <code>onEdit</code> is defined on <code>App</code> level, we&#39;ll need to pass <code>onEdit</code> handler through <code>Notes</code>. So for the stub to work, changes in two files are needed. Here&#39;s what it should look like for <code>App</code>:</p>
<p><strong>app/components/App.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> uuid <span class="token keyword" >from</span> <span class="token string" >'node-uuid'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> Notes <span class="token keyword" >from</span> <span class="token string" >'./Notes.jsx'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >App</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
  <span class="token function" >constructor</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token punctuation" >}</span>
  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> notes <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>notes<span class="token punctuation" >;</span>

    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
        <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>addNote<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token operator" >+</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
<div class="leanpub-delete">
        <span class="token operator" >&lt;</span>Notes notes<span class="token operator" >=</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
</div>
<div class="leanpub-insert">
        <span class="token operator" >&lt;</span>Notes notes<span class="token operator" >=</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >}</span> onEdit<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>editNote<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
</div>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
  addNote <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
<div class="leanpub-insert">
  editNote <span class="token operator" >=</span> <span class="token punctuation" >(</span>id<span class="token punctuation" >,</span> task<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> notes <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>notes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span>note <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
      <span class="token keyword" >if</span><span class="token punctuation" >(</span>note<span class="token punctuation" >.</span>id <span class="token operator" >===</span> id <span class="token operator" >&amp;&amp;</span> task<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
        note<span class="token punctuation" >.</span>task <span class="token operator" >=</span> task<span class="token punctuation" >;</span>
      <span class="token punctuation" >}</span>

      <span class="token keyword" >return</span> note<span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
</div>
<span class="token punctuation" >}</span>
</code></pre>
<p>The idea is that <code>Notes</code> will return via our callback the id of the note being modified and the new state of the task. We&#39;ll then patch the state of the application through <code>setState</code> as before.</p>
<p>To make the scheme work as designed, we need to modify <code>Notes</code> to work according to the idea. It will <code>bind</code> the id of the note in question. When the callback is triggered, the remaining parameter receives a value and the callback gets called:</p>
<p><strong>app/components/Notes.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> Note <span class="token keyword" >from</span> <span class="token string" >'./Note.jsx'</span><span class="token punctuation" >;</span>

<div class="leanpub-delete">
<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
</div>
<div class="leanpub-insert">
<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >,</span> onEdit<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
</div>
  <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
    <span class="token operator" >&lt;</span>ul<span class="token operator" >></span><span class="token punctuation" >{</span>notes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span>note <span class="token operator" >=</span><span class="token operator" >></span>
<div class="leanpub-delete">
      <span class="token operator" >&lt;</span>li key<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>id<span class="token punctuation" >}</span><span class="token operator" >></span>
        <span class="token operator" >&lt;</span>Note task<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>li<span class="token operator" >></span>
</div>
<div class="leanpub-insert">
      <span class="token operator" >&lt;</span>li key<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>id<span class="token punctuation" >}</span><span class="token operator" >></span>
        <span class="token operator" >&lt;</span>Note
          task<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span>
          onEdit<span class="token operator" >=</span><span class="token punctuation" >{</span>onEdit<span class="token punctuation" >.</span><span class="token function" >bind</span><span class="token punctuation" >(</span><span class="token keyword" >null</span><span class="token punctuation" >,</span> note<span class="token punctuation" >.</span>id<span class="token punctuation" >)</span><span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>li<span class="token operator" >></span>
</div>
    <span class="token punctuation" >)</span><span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>ul<span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>If you refresh and try to edit a <code>Note</code> now, the modification should stick. The same idea can be used to implement a lot of functionality and this is a pattern you will see a lot.</p>
<p><img src="/images/react_06.png" alt="Edited a note"></p>
<h2 class="header"><a class="header-anchor" href="#removing-notes-" id="removing-notes-"></a><span class="text">Removing <code>Notes</code></span><a class="header-anchor-select" href="#removing-notes-">#</a></h2>
<p>We are still missing one vital functionality. It would be nice to be able to delete notes. We could implement a button per <code>Note</code> and trigger the logic using that. It will look a little rough initially, but we will style it later.</p>
<p>As before, we&#39;ll need to define some logic on <code>App</code> level. Deleting a note can be achieved by first looking for a <code>Note</code> to remove based on id. After we know which <code>Note</code> to remove, we can construct a new state without it.</p>
<p>Just like earlier, it will take three changes. We need to define logic at <code>App</code> level, bind the <code>id</code> at <code>Notes</code>, and then finally trigger the logic at <code>Note</code> through its user interface. To get started, <code>App</code> logic can be defined in terms of <code>filter</code>:</p>
<p><strong>app/components/App.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> uuid <span class="token keyword" >from</span> <span class="token string" >'node-uuid'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> Notes <span class="token keyword" >from</span> <span class="token string" >'./Notes.jsx'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >App</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> notes <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>notes<span class="token punctuation" >;</span>

    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
        <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>addNote<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token operator" >+</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
<div class="leanpub-delete">
        <span class="token operator" >&lt;</span>Notes notes<span class="token operator" >=</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >}</span> onEdit<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>editNote<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
</div>
<div class="leanpub-insert">
        <span class="token operator" >&lt;</span>Notes notes<span class="token operator" >=</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >}</span>
          onEdit<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>editNote<span class="token punctuation" >}</span>
          onDelete<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>deleteNote<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
</div>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
<div class="leanpub-insert">
  deleteNote <span class="token operator" >=</span> <span class="token punctuation" >(</span>id<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      notes<span class="token punctuation" >:</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>notes<span class="token punctuation" >.</span><span class="token function" >filter</span><span class="token punctuation" >(</span>note <span class="token operator" >=</span><span class="token operator" >></span> note<span class="token punctuation" >.</span>id <span class="token operator" >!==</span> id<span class="token punctuation" >)</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
</div>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<span class="token punctuation" >}</span>
</code></pre>
<p><code>Notes</code> will work similarly as earlier:</p>
<p><strong>app/components/Notes.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> Note <span class="token keyword" >from</span> <span class="token string" >'./Note.jsx'</span><span class="token punctuation" >;</span>

<div class="leanpub-delete">
<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >,</span> onEdit<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
</div>
<div class="leanpub-insert">
<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >,</span> onEdit<span class="token punctuation" >,</span> onDelete<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
</div>
  <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
    <span class="token operator" >&lt;</span>ul<span class="token operator" >></span><span class="token punctuation" >{</span>notes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span>note <span class="token operator" >=</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span>li key<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>id<span class="token punctuation" >}</span><span class="token operator" >></span>
<div class="leanpub-delete">
        <span class="token operator" >&lt;</span>Note
          task<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span>
          onEdit<span class="token operator" >=</span><span class="token punctuation" >{</span>onEdit<span class="token punctuation" >.</span><span class="token function" >bind</span><span class="token punctuation" >(</span><span class="token keyword" >null</span><span class="token punctuation" >,</span> note<span class="token punctuation" >.</span>id<span class="token punctuation" >)</span><span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
</div>
<div class="leanpub-insert">
        <span class="token operator" >&lt;</span>Note
          task<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span>
          onEdit<span class="token operator" >=</span><span class="token punctuation" >{</span>onEdit<span class="token punctuation" >.</span><span class="token function" >bind</span><span class="token punctuation" >(</span><span class="token keyword" >null</span><span class="token punctuation" >,</span> note<span class="token punctuation" >.</span>id<span class="token punctuation" >)</span><span class="token punctuation" >}</span>
          onDelete<span class="token operator" >=</span><span class="token punctuation" >{</span>onDelete<span class="token punctuation" >.</span><span class="token function" >bind</span><span class="token punctuation" >(</span><span class="token keyword" >null</span><span class="token punctuation" >,</span> note<span class="token punctuation" >.</span>id<span class="token punctuation" >)</span><span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
</div>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>li<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>ul<span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>Finally, we need to attach a delete button to each <code>Note</code> and then trigger <code>onDelete</code> when those are clicked:</p>
<p><strong>app/components/Note.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >Note</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  renderNote <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// If the user clicks a normal note, trigger editing logic.</span>
<div class="leanpub-delete">
    <span class="token keyword" >return</span> <span class="token operator" >&lt;</span>div onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>edit<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span><span class="token punctuation" >;</span>
</div>
<div class="leanpub-insert">
    <span class="token keyword" >const</span> onDelete <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>onDelete<span class="token punctuation" >;</span>

    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>edit<span class="token punctuation" >}</span><span class="token operator" >></span>
        <span class="token operator" >&lt;</span>span<span class="token operator" >></span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>span<span class="token operator" >></span>
        <span class="token punctuation" >{</span>onDelete <span class="token operator" >?</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >renderDelete</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >:</span> <span class="token keyword" >null</span> <span class="token punctuation" >}</span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
<div class="leanpub-insert">
  renderDelete <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>onDelete<span class="token punctuation" >}</span><span class="token operator" >></span>x<span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
</div>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
</code></pre>
<p>After these changes and refreshing you should be able to delete notes as you like.</p>
<p><img src="/images/react_07.png" alt="Deleted a note"></p>
<blockquote class="tip">You may need to trigger a refresh at the browser to make these changes show up. Hit <em>CTRL/CMD-R</em>.</blockquote><h2 class="header"><a class="header-anchor" href="#styling-application" id="styling-application"></a><span class="text">Styling Application</span><a class="header-anchor-select" href="#styling-application">#</a></h2>
<p>Aesthetically, our current application is very barebones. As pretty applications are more fun to use, we can do a little something about that. In this case we&#39;ll be sticking to an old skool way of styling. In other words, we&#39;ll sprinkle some CSS classes around and then apply CSS selectors based on those. The <em>Styling React</em> chapter discusses various other approaches in greater detail.</p>
<h3 class="header"><a class="header-anchor" href="#attaching-classes-to-components" id="attaching-classes-to-components"></a><span class="text">Attaching Classes to Components</span><a class="header-anchor-select" href="#attaching-classes-to-components">#</a></h3>
<p>In order to make our application styleable, we will need to attach some classes to various parts of it:</p>
<p><strong>app/components/App.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> uuid <span class="token keyword" >from</span> <span class="token string" >'node-uuid'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> Notes <span class="token keyword" >from</span> <span class="token string" >'./Notes.jsx'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >App</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> notes <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>notes<span class="token punctuation" >;</span>

    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
<div class="leanpub-delete">
        <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>addNote<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token operator" >+</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
</div>
<div class="leanpub-insert">
        <span class="token operator" >&lt;</span>button className<span class="token operator" >=</span><span class="token string" >"add-note"</span> onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>addNote<span class="token punctuation" >}</span><span class="token operator" >></span><span class="token operator" >+</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
</div>
        <span class="token operator" >&lt;</span>Notes notes<span class="token operator" >=</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >}</span>
          onEdit<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>editNote<span class="token punctuation" >}</span>
          onDelete<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>deleteNote<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<span class="token punctuation" >}</span>
</code></pre>
<p><strong>app/components/Notes.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> Note <span class="token keyword" >from</span> <span class="token string" >'./Note.jsx'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>notes<span class="token punctuation" >,</span> onEdit<span class="token punctuation" >,</span> onDelete<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
<div class="leanpub-delete">
    <span class="token operator" >&lt;</span>ul<span class="token operator" >></span><span class="token punctuation" >{</span>notes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span>note <span class="token operator" >=</span><span class="token operator" >></span>
</div>
<div class="leanpub-insert">
    <span class="token operator" >&lt;</span>ul className<span class="token operator" >=</span><span class="token string" >"notes"</span><span class="token operator" >></span><span class="token punctuation" >{</span>notes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation" >(</span>note <span class="token operator" >=</span><span class="token operator" >></span>
</div>
<div class="leanpub-delete">
      <span class="token operator" >&lt;</span>li key<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>id<span class="token punctuation" >}</span><span class="token operator" >></span>
</div>
<div class="leanpub-insert">
      <span class="token operator" >&lt;</span>li className<span class="token operator" >=</span><span class="token string" >"note"</span> key<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>id<span class="token punctuation" >}</span><span class="token operator" >></span>
</div>
        <span class="token operator" >&lt;</span>Note
          task<span class="token operator" >=</span><span class="token punctuation" >{</span>note<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span>
          onEdit<span class="token operator" >=</span><span class="token punctuation" >{</span>onEdit<span class="token punctuation" >.</span><span class="token function" >bind</span><span class="token punctuation" >(</span><span class="token keyword" >null</span><span class="token punctuation" >,</span> note<span class="token punctuation" >.</span>id<span class="token punctuation" >)</span><span class="token punctuation" >}</span>
          onDelete<span class="token operator" >=</span><span class="token punctuation" >{</span>onDelete<span class="token punctuation" >.</span><span class="token function" >bind</span><span class="token punctuation" >(</span><span class="token keyword" >null</span><span class="token punctuation" >,</span> note<span class="token punctuation" >.</span>id<span class="token punctuation" >)</span><span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>li<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>ul<span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p><strong>app/components/Note.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >Note</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>
  <span class="token function" >constructor</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >super</span><span class="token punctuation" >(</span>props<span class="token punctuation" >)</span><span class="token punctuation" >;</span>

    <span class="token keyword" >this</span><span class="token punctuation" >.</span>state <span class="token operator" >=</span> <span class="token punctuation" >{</span>
      editing<span class="token punctuation" >:</span> <span class="token boolean" >false</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >if</span><span class="token punctuation" >(</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>editing<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >return</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >renderEdit</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span>

    <span class="token keyword" >return</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >renderNote</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
  renderEdit <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token operator" >&lt;</span>input type<span class="token operator" >=</span><span class="token string" >"text"</span>
      ref<span class="token operator" >=</span><span class="token punctuation" >{</span>
        <span class="token punctuation" >(</span>e<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> e <span class="token operator" >?</span> e<span class="token punctuation" >.</span>selectionStart <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>task<span class="token punctuation" >.</span>length <span class="token punctuation" >:</span> <span class="token keyword" >null</span>
      <span class="token punctuation" >}</span>
      autoFocus<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token boolean" >true</span><span class="token punctuation" >}</span>
      defaultValue<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span>
      onBlur<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>finishEdit<span class="token punctuation" >}</span>
      onKeyPress<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>checkEnter<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  renderDelete <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
<div class="leanpub-delete">
    <span class="token keyword" >return</span> <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>onDelete<span class="token punctuation" >}</span><span class="token operator" >></span>x<span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span><span class="token punctuation" >;</span>
</div>
<div class="leanpub-insert">
    <span class="token keyword" >return</span> <span class="token operator" >&lt;</span>button
      className<span class="token operator" >=</span><span class="token string" >"delete-note"</span>
      onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>onDelete<span class="token punctuation" >}</span><span class="token operator" >></span>x<span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span><span class="token punctuation" >;</span>
</div>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  renderNote <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> onDelete <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>onDelete<span class="token punctuation" >;</span>

    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>edit<span class="token punctuation" >}</span><span class="token operator" >></span>
<div class="leanpub-delete">
        <span class="token operator" >&lt;</span>span<span class="token operator" >></span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>span<span class="token operator" >></span>
</div>
<div class="leanpub-insert">
        <span class="token operator" >&lt;</span>span className<span class="token operator" >=</span><span class="token string" >"task"</span><span class="token operator" >></span><span class="token punctuation" >{</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>task<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>span<span class="token operator" >></span>
</div>
        <span class="token punctuation" >{</span>onDelete <span class="token operator" >?</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >renderDelete</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >:</span> <span class="token keyword" >null</span> <span class="token punctuation" >}</span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<span class="token punctuation" >}</span>
</code></pre>
<h3 class="header"><a class="header-anchor" href="#styling-components" id="styling-components"></a><span class="text">Styling Components</span><a class="header-anchor-select" href="#styling-components">#</a></h3>
<p>The first step is to get rid of that horrible <em>serif</em> font.</p>
<p><strong>app/main.css</strong></p>
<pre><code class="lang-css"><span class="token selector" >body </span><span class="token punctuation" >{</span>
  <span class="token property" >background</span><span class="token punctuation" >:</span> cornsilk<span class="token punctuation" >;</span>
  <span class="token property" >font-family</span><span class="token punctuation" >:</span> sans-serif<span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>Looking a little nicer now:</p>
<p><img src="/images/react_08.png" alt="Sans serif"></p>
<p>A good next step would be to constrain the <code>Notes</code> container a little and get rid of those list bullets.</p>
<p><strong>app/main.css</strong></p>
<pre><code class="lang-css"><span class="token selector" ><span class="token class" >...</span>

<span class="token class" >.add-note</span> </span><span class="token punctuation" >{</span>
  <span class="token property" >background-color</span><span class="token punctuation" >:</span> <span class="token hexcode" >#fdfdfd</span><span class="token punctuation" >;</span>
  <span class="token property" >border</span><span class="token punctuation" >:</span> <span class="token number" >1</span>px solid <span class="token hexcode" >#ccc</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>

<span class="token selector" ><span class="token class" >.notes</span> </span><span class="token punctuation" >{</span>
  <span class="token property" >margin</span><span class="token punctuation" >:</span> <span class="token number" >0.5</span>em<span class="token punctuation" >;</span>
  <span class="token property" >padding-left</span><span class="token punctuation" >:</span> <span class="token number" >0</span><span class="token punctuation" >;</span>

  <span class="token property" >max-width</span><span class="token punctuation" >:</span> <span class="token number" >10</span>em<span class="token punctuation" >;</span>
  <span class="token property" >list-style</span><span class="token punctuation" >:</span> none<span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>Removing bullets helps:</p>
<p><img src="/images/react_09.png" alt="No bullets"></p>
<p>To make individual <code>Notes</code> stand out we can apply a couple of rules.</p>
<p><strong>app/main.css</strong></p>
<pre><code class="lang-css"><span class="token selector" ><span class="token class" >...</span>

<span class="token class" >.note</span> </span><span class="token punctuation" >{</span>
  <span class="token property" >margin-bottom</span><span class="token punctuation" >:</span> <span class="token number" >0.5</span>em<span class="token punctuation" >;</span>
  <span class="token property" >padding</span><span class="token punctuation" >:</span> <span class="token number" >0.5</span>em<span class="token punctuation" >;</span>

  <span class="token property" >background-color</span><span class="token punctuation" >:</span> <span class="token hexcode" >#fdfdfd</span><span class="token punctuation" >;</span>
  <span class="token property" >box-shadow</span><span class="token punctuation" >:</span> <span class="token number" >0</span> <span class="token number" >0</span> <span class="token number" >0.3</span>em <span class="token number" >0.03</span>em <span class="token function" >rgba</span><span class="token punctuation" >(</span><span class="token number" >0</span>, <span class="token number" >0</span>, <span class="token number" >0</span>, <span class="token number" >0.3</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
<span class="token selector" ><span class="token class" >.note</span><span class="token pseudo-class" >:hover</span> </span><span class="token punctuation" >{</span>
  <span class="token property" >box-shadow</span><span class="token punctuation" >:</span> <span class="token number" >0</span> <span class="token number" >0</span> <span class="token number" >0.3</span>em <span class="token number" >0.03</span>em <span class="token function" >rgba</span><span class="token punctuation" >(</span><span class="token number" >0</span>, <span class="token number" >0</span>, <span class="token number" >0</span>, <span class="token number" >0.7</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  <span class="token property" >transition</span><span class="token punctuation" >:</span> <span class="token number" >0.6</span>s<span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>

<span class="token selector" ><span class="token class" >.note</span> <span class="token class" >.task</span> </span><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">/* force to use inline-block so that it gets minimum height */</span>
  <span class="token property" >display</span><span class="token punctuation" >:</span> inline-block<span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>Now the notes stand out a bit:</p>
<p><img src="/images/react_10.png" alt="Styling notes"></p>
<p>I animated <code>Note</code> shadow in the process. This way the user gets a better indication of what <code>Note</code> is being hovered upon. This won&#39;t work on touch based interfaces, but it&#39;s a nice touch for the desktop.</p>
<p>Finally, we should make those delete buttons stand out less. One way to achieve this is to hide them by default and show them on hover. The gotcha is that delete won&#39;t work on touch, but we can live with that.</p>
<p><strong>app/main.css</strong></p>
<pre><code class="lang-css"><span class="token selector" ><span class="token class" >...</span>

<span class="token class" >.note</span> <span class="token class" >.delete-note</span> </span><span class="token punctuation" >{</span>
  <span class="token property" >float</span><span class="token punctuation" >:</span> right<span class="token punctuation" >;</span>

  <span class="token property" >padding</span><span class="token punctuation" >:</span> <span class="token number" >0</span><span class="token punctuation" >;</span>

  <span class="token property" >background-color</span><span class="token punctuation" >:</span> <span class="token hexcode" >#fdfdfd</span><span class="token punctuation" >;</span>
  <span class="token property" >border</span><span class="token punctuation" >:</span> none<span class="token punctuation" >;</span>

  <span class="token property" >cursor</span><span class="token punctuation" >:</span> pointer<span class="token punctuation" >;</span>

  <span class="token property" >visibility</span><span class="token punctuation" >:</span> hidden<span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
<span class="token selector" ><span class="token class" >.note</span><span class="token pseudo-class" >:hover</span> <span class="token class" >.delete-note</span> </span><span class="token punctuation" >{</span>
  <span class="token property" >visibility</span><span class="token punctuation" >:</span> visible<span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>No more of those pesky delete buttons:</p>
<p><img src="/images/react_11.png" alt="Delete on hover"></p>
<p>After these few steps, we have an application that looks passable. We&#39;ll be improving its appearance as we add functionality, but at least it&#39;s somewhat visually appealing.</p>
<h2 class="header"><a class="header-anchor" href="#understanding-react-components" id="understanding-react-components"></a><span class="text">Understanding React Components</span><a class="header-anchor-select" href="#understanding-react-components">#</a></h2>
<p>Understanding how <code>props</code> and <code>state</code> work is important. Component lifecycle is another key concept. We already touched on it earlier, but it&#39;s a good idea to understand it in more detail. You can achieve most tasks in React by applying these concepts throughout your application. React provides the following lifecycle hooks:</p>
<ul>
<li><code>componentWillMount()</code> gets triggered once before any rendering. One way to use it would be to load data asynchronously there and force rendering through <code>setState</code>.</li>
<li><code>componentDidMount()</code> gets triggered after initial rendering. You have access to the DOM here. You could use this hook to wrap a jQuery plugin within a component, for instance.</li>
<li><code>componentWillReceiveProps(object nextProps)</code> triggers when the component receives new props. You could, for instance, modify your component state based on the received props.</li>
<li><code>shouldComponentUpdate(object nextProps, object nextState)</code> allows you to optimize the rendering. If you check the props and state and see that there&#39;s no need to update, return <code>false</code>.</li>
<li><code>componentWillUpdate(object nextProps, object nextState)</code> gets triggered after <code>shouldComponentUpdate</code> and before <code>render()</code>. It is not possible to use <code>setState</code> here, but you can set class properties, for instance. <a href="https://facebook.github.io/react/docs/advanced-performance.html#shouldcomponentupdate-in-action">The official documentation</a> goes into greater details. In short, this is where immutable data structures, such as <a href="https://facebook.github.io/immutable-js/">Immutable.js</a>, come handy thanks to their easy equality checks.</li>
<li><code>componentDidUpdate()</code> is triggered after rendering. You can modify the DOM here. This can be useful for adapting other code to work with React.</li>
<li><code>componentWillUnmount()</code> is triggered just before a component is unmounted from the DOM. This is the ideal place to perform cleanup (e.g., remove running timers, custom DOM elements, and so on).</li>
</ul>
<p>Beyond the lifecycle hooks, there are a variety of <a href="https://facebook.github.io/react/docs/component-specs.html">properties and methods</a> you should be aware of if you are going to use <code>React.createClass</code>:</p>
<ul>
<li><code>displayName</code> - It is preferable to set <code>displayName</code> as that will improve debug information. For ES6 classes this is derived automatically based on the class name.</li>
<li><code>getInitialState()</code> - In class based approach the same can be achieved through <code>constructor</code>.</li>
<li><code>getDefaultProps()</code> - In classes you can set these in <code>constructor</code>.</li>
<li><code>mixins</code> - <code>mixins</code> contains an array of mixins to apply to components.</li>
<li><code>statics</code> - <code>statics</code> contains static properties and method for a component. In ES6 you can assign them to the class as below:</li>
</ul>
<pre><code class="lang-javascript"><span class="token keyword" >class</span> <span class="token class-name" >Note</span> <span class="token punctuation" >{</span>
  <span class="token function" >render</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
Note<span class="token punctuation" >.</span>willTransitionTo <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >}</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> Note<span class="token punctuation" >;</span>
</code></pre>
<p>Some libraries, such as <code>react-dnd</code>, rely on static methods to provide transition hooks. They allow you to control what happens when a component is shown or hidden. By definition statics are available through the class itself.</p>
<p>Both class and <code>React.createClass</code> based components allow you to document the interface of your component using <code>propTypes</code>. To dig deeper, read the <em>Typing with React</em> chapter.</p>
<p>Both support <code>render()</code>, the workhorse of React. In function based definition <code>render()</code> is the function itself. <code>render()</code> simply describes what the component should look like. In case you don&#39;t want to render anything, return either <code>null</code> or <code>false</code>.</p>
<blockquote>
<p>React provides a feature known as <a href="https://facebook.github.io/react/docs/more-about-refs.html">refs</a> so you can perform operations on React elements through DOM. This is an escape hatch designed for those cases where React itself doesn&#39;t cut it. Performing measurements is a good example. Refs need to be attached to stateful components in order to work.</p>
</blockquote>
<h2 class="header"><a class="header-anchor" href="#react-component-conventions" id="react-component-conventions"></a><span class="text">React Component Conventions</span><a class="header-anchor-select" href="#react-component-conventions">#</a></h2>
<p>I prefer to have the <code>constructor</code> first, followed by lifecycle hooks, <code>render()</code>, and finally, methods used by <code>render()</code>. I like this top-down approach as it makes it straightforward to follow code. Some prefer to put the methods used by <code>render()</code> before it. There are also various naming conventions. It is possible to use <code>_</code> prefix for event handlers, too.</p>
<p>In the end, you will have to find conventions that you like and which work the best for you. I go into more detail about this topic in the linting chapter, where I introduce various code quality related tools. Through the use of these tools, it is possible to enforce coding style to some extent.</p>
<p>This can be useful in a team environment. It decreases the amount of friction when working on code written by others. Even on personal projects, using tools to verify syntax and standards for you can be useful. It lessens the amount and severity of mistakes.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>You can get quite far just with vanilla React. The problem is that we are starting to mix data related concerns and logic with our view components. We&#39;ll improve the architecture of our application by introducing Flux to it.</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this chapter consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="clear"><input type="submit" class="btn button" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/images/kanban_photo.jpg);"></div><span class="new-prevnext__info">Previous chapter</span><a class="new-prevnext__link" href="/webpack_react/react">Developing Kanban Application</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/images/delorean.jpg);"></div><span class="new-prevnext__info">Next chapter</span><a class="new-prevnext__link" href="/webpack_react/react_and_flux">React and Flux</a></div></div><div id="disqus_thread"></div></div><a class="next-page" href="/webpack_react/react_and_flux" title="React and Flux"></a><a class="previous-page" href="/webpack_react/react" title="Developing Kanban Application"></a></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a class="" href="/">Home</a></div><div class="nav__link"><a class="" href="/blog">Read the blog</a></div><div class="nav__link"><a class="" href="https://leanpub.com/survivejs_webpack">Buy the full ebook</a></div><div class="nav__link"><a class="" href=""></a></div><div class="nav__link"><a class="" href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><div class="right ribbon github-fork-ribbon-wrapper"><div class="github-fork-ribbon" style="background-color:black;"><a href="https://github.com/survivejs/webpack_react/issues/new?title=Implementing a Basic Note Application - " target="_blank">Submit feedback</a></div></div><footer><div class="footer-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank">Mailing List</a></li><li><a href="https://gitter.im/survivejs/webpack_react" target="_blank">Gitter Chat</a></li><li><a href="https://github.com/survivejs/webpack_react" target="_blank">GitHub</a></li><li><a href="/atom.xml" target="_blank">Blog RSS</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank">Contact</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/survivejs200-rc3">SurviveJS - Webpack and React v2.0.0-rc3</a></li><li><a class="blog-teaser" href="/blog/survivejs200-rc2">SurviveJS - Webpack and React v2.0.0-rc2</a></li><li><a class="blog-teaser" href="/blog/survivejs200-rc1">SurviveJS - Webpack and React v2.0.0-rc1</a></li><li><a class="blog-teaser" href="/blog/codemod-interview">Codemod - Refactoring Code Programmatically - Interview with Ramana Venkata</a></li><li><a class="blog-teaser" href="/blog/2015-recap">2015 Recap</a></li><li><a class="blog-teaser" href="/blog/survivejs200-beta2">SurviveJS - Webpack and React v2.0.0-beta2</a></li><li><a class="blog-teaser" href="/blog/whitestormjs-interview">WhitestormJS - Three.js Based Game Engine - Interview with Alexander Buzin</a></li><li><a class="blog-teaser" href="/blog/survivejs1915">SurviveJS - Webpack and React v1.9.15</a></li><li><a class="blog-teaser" href="/blog/react-indie-bundle">React Indie Bundle - Summary</a></li><li><a class="blog-teaser" href="/blog/starhackit-interview">StarHackIt - A Full Stack ES6/ES7 Starter Kit based on React and Node - Interview with Frederic Heem</a></li></ul></div></div></footer><div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            room: 'survivejs/webpack_react'
          };
        </script>,<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div></main></body></html>