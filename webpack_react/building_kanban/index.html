<html lang="en"><head><title>SurviveJS - Building Kanban</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui"><meta name="description" content="
Now that we have a nice Kanban application up and running, we can worry about showing it to the public. The goal of this chapter is to set up a nice production grade build. There are various techniques we can apply to bring the bundle size down. We can also leverage browser caching.

"><meta name="keywords" content="webpack,react,javascript,programming,web development"><link rel="icon" type="image/png" href="../../assets/img/favicon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><link rel="stylesheet" href="../../assets/main.css"></head><body><div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a href="/">Home</a></div><div class="nav__link"><a href="/blog">Read the blog</a></div><div class="nav__link"><a href="https://leanpub.com/survivejs_webpack">Buy the full ebook</a></div><div class="nav__link"><a href=""></a></div><div class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><div class="right ribbon github-fork-ribbon-wrapper"><div class="github-fork-ribbon" style="background-color:black;"><a href="https://github.com/survivejs/webpack_react/issues/new?title=Building Kanban - " target="_blank">Submit feedback</a></div></div><main role="main"><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/images/boots.jpg);"></div><h1 class="post__heading">Building Kanban</h1><div class="toc-nav__wrapper"><h4 class="toc-nav--header">Table of Contents</h4><div class="toc-nav"><a href="/webpack_react/introduction" class="toc-nav__link chapter">Introduction</a><a href="/webpack_react/webpack" class="toc-nav__link part">Setting Up Webpack</a><a href="/webpack_react/webpack_compared" class="toc-nav__link chapter">Webpack Compared</a><a href="/webpack_react/developing_with_webpack" class="toc-nav__link chapter">Developing with Webpack</a><a href="/webpack_react/webpack_and_react" class="toc-nav__link chapter">Webpack and React</a><a href="/webpack_react/react" class="toc-nav__link part">Developing Kanban Application</a><a href="/webpack_react/implementing_notes" class="toc-nav__link chapter">Implementing a Basic Note Application</a><a href="/webpack_react/react_and_flux" class="toc-nav__link chapter">React and Flux</a><a href="/webpack_react/from_notes_to_kanban" class="toc-nav__link chapter">From Notes to Kanban</a><a href="/webpack_react/implementing_dnd" class="toc-nav__link chapter">Implementing Drag and Drop</a><span class="toc-nav__link toc-nav__link--current chapter">Building Kanban</span><a href="/webpack_react/testing_react" class="toc-nav__link chapter">Testing React*</a><a href="/webpack_react/typing_with_react" class="toc-nav__link chapter">Typing with React*</a><a href="/webpack_react/advanced" class="toc-nav__link part">Advanced Techniques</a><a href="/webpack_react/linting_in_webpack" class="toc-nav__link chapter">Linting in Webpack</a><a href="/webpack_react/authoring_libraries" class="toc-nav__link chapter">Authoring Libraries</a><a href="/webpack_react/styling_react" class="toc-nav__link chapter">Styling React</a><a href="/webpack_react/troubleshooting" class="toc-nav__link chapter">Troubleshooting</a></div></div><div class="chapter"><div class="post__content"><blockquote class="front__latestpost tip"><div>From the blog:</div><a class="front__latestpost-link" href="/blog/react-component-boilerplate-10">React Component Boilerplate v1.0</a></blockquote><div class="post__meta"><a class="post__start_source" href="https://github.com/survivejs/webpack_react/tree/master/project_source/07_implementing_dnd/kanban_app" target="_blank">Start source code</a><a class="post__end_source" href="https://github.com/survivejs/webpack_react/tree/master/project_source/08_building_kanban/kanban_app" target="_blank">Finished source code</a><a class="post__demo" href="/demos/08_building_kanban" target="_blank">Demo</a></div><div class="chapter-content"><p>Now that we have a nice Kanban application up and running, we can worry about showing it to the public. The goal of this chapter is to set up a nice production grade build. There are various techniques we can apply to bring the bundle size down. We can also leverage browser caching.</p>
<h2 class="header"><a class="header-anchor" href="#setting-up-a-build-target" id="setting-up-a-build-target"></a><span class="text">Setting Up a Build Target</span><a class="header-anchor-select" href="#setting-up-a-build-target">#</a></h2>
<p>In our current setup, we always serve the application through <code>webpack-dev-server</code>. To create a build, we&apos;ll need to extend the <code>scripts</code> section in <em>package.json</em>.</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
    ...
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span>
</code></pre>
<p>We&apos;ll also need some build specific configuration to make Webpack pick up our JSX. We can set up sourcemaps while we&apos;re at it. I&apos;ll be using the <code>source-map</code> option here as that&apos;s a good choice for production.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>TARGET <span class="token operator">===</span> <span class="token string">&apos;build&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    devtool<span class="token punctuation">:</span> <span class="token string">&apos;source-map&apos;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>After these changes, <code>npm run build</code> should yield something like the following:</p>
<pre><code class="lang-bash"><span class="token operator">&gt;</span> webpack

Hash<span class="token punctuation">:</span> bd3b549c6c712233167f
Version<span class="token punctuation">:</span> webpack <span class="token number">1.10</span><span class="token punctuation">.</span>1
Time<span class="token punctuation">:</span> 4903ms
        Asset       Size  Chunks             Chunk Names
    bundle<span class="token punctuation">.</span>js    <span class="token number">1.09</span> MB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
bundle<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map    <span class="token number">1.28</span> MB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
   index<span class="token punctuation">.</span>html  <span class="token number">184</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
    <span class="token operator">+</span> <span class="token number">345</span> hidden modules
</code></pre>
<p>1.09 MB is quite a lot. We should do something about that.</p>
<h2 class="header"><a class="header-anchor" href="#optimizing-build-size" id="optimizing-build-size"></a><span class="text">Optimizing Build Size</span><a class="header-anchor-select" href="#optimizing-build-size">#</a></h2>
<p>There are a couple of basic things we can do to slim down our build. We can apply some minification to it. We can also tell React to optimize itself. Doing both will result in significant size savings. Provided we apply gzip compression on the content when serving it, further gains may be made.</p>
<h3 class="header"><a class="header-anchor" href="#minification" id="minification"></a><span class="text">Minification</span><a class="header-anchor-select" href="#minification">#</a></h3>
<p>Minification will convert our code into a smaller format without losing any meaning. Usually this means some amount of rewriting code through predefined transformations. Sometimes this can break code as it can rewrite pieces of code you inadvertently depend upon. This is the reason why we gave explicit ids to our stores for instance.</p>
<p>The easiest way to enable minification is to call <code>webpack -p</code> (<code>-p</code> as in <code>production</code>). As Uglify will output a lot of warnings and they don&apos;t provide value in this case, we&apos;ll be disabling them. Add the following section to your Webpack configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">if</span><span class="token punctuation">(</span>TARGET <span class="token operator">===</span> <span class="token string">&apos;build&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    devtool<span class="token punctuation">:</span> <span class="token string">&apos;source-map&apos;</span><span class="token punctuation">,</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        compress<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          warnings<span class="token punctuation">:</span> <span class="token keyword">false</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote class="tip">Uglify warnings can help you to understand how it processes the code. Therefore it may be beneficial to have a peek at the output every once in a while.</blockquote><p>If you hit <code>npm run build</code> now, you should see better results:</p>
<pre><code class="lang-bash"><span class="token operator">&gt;</span> webpack

Hash<span class="token punctuation">:</span> d3508663532b5b3565cc
Version<span class="token punctuation">:</span> webpack <span class="token number">1.10</span><span class="token punctuation">.</span>1
Time<span class="token punctuation">:</span> 12221ms
        Asset       Size  Chunks             Chunk Names
    bundle<span class="token punctuation">.</span>js     <span class="token number">324</span> kB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
bundle<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map    <span class="token number">2.66</span> MB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
   index<span class="token punctuation">.</span>html  <span class="token number">184</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
    <span class="token operator">+</span> <span class="token number">345</span> hidden modules
</code></pre>
<p>Given it needs to do more work, it took longer. But on the plus side the build is much smaller now.</p>
<blockquote class="tip">It is possible to push minification further by enabling variable name mangling. It comes with some extra complexity to worry about, but it may be worth it when you are pushing for minimal size. See <a href="https://webpack.github.io/docs/list-of-plugins.html#uglifyjsplugin">the official documentation</a> for details.</blockquote><h3 class="header"><a class="header-anchor" href="#-process-env-node_env-" id="-process-env-node_env-"></a><span class="text"><code>process.env.NODE_ENV</code></span><a class="header-anchor-select" href="#-process-env-node_env-">#</a></h3>
<p>We can perform one more step to decrease build size further. React relies on <code>process.env.NODE_ENV</code> based optimizations. If we force it to <code>production</code>, React will get built in an optimized manner. This will disable some checks (e.g., property type checks). Most importantly it will give you a smaller build and improved performance.</p>
<p>In Webpack terms, you can add the following snippet to the <code>plugins</code> section of your configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">if</span><span class="token punctuation">(</span>TARGET <span class="token operator">===</span> <span class="token string">&apos;build&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    devtool<span class="token punctuation">:</span> <span class="token string">&apos;source-map&apos;</span><span class="token punctuation">,</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">&apos;process.env&apos;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token comment" spellcheck="true">// This affects react lib size</span>
          <span class="token string">&apos;NODE_ENV&apos;</span><span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">&apos;production&apos;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This is a useful technique for your own code. If you have a section of code that evaluates as <code>false</code> after this process, the minifier will remove it from build completely. You can attach debugging specific utilities and such to your code easily this way. For instance, you could build a powerful logging system just for development. Here&apos;s a small example of what that could look like:</p>
<pre><code class="lang-javascript"><span class="token keyword">if</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV <span class="token operator">!</span><span class="token operator">==</span> <span class="token string">&apos;production&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;developing like an ace&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote class="tip">That <code>JSON.stringify</code> is needed, as Webpack will perform string replace &quot;as is&quot;. In this case, we&apos;ll want to end up with strings, as that&apos;s what various comparisons expect, not just <code>production</code>. The latter would just cause an error. An alternative would be to use a string such as <code>&apos;&quot;production&quot;&apos;</code>. Note the double quotation marks (&quot;).</blockquote><p>Hit <code>npm run build</code> again, and you should see improved results:</p>
<pre><code class="lang-bash"><span class="token operator">&gt;</span> TARGET<span class="token operator">=</span>build webpack

Hash<span class="token punctuation">:</span> 37ebe639517bfeb72ff6
Version<span class="token punctuation">:</span> webpack <span class="token number">1.10</span><span class="token punctuation">.</span>1
Time<span class="token punctuation">:</span> 10930ms
        Asset       Size  Chunks             Chunk Names
    bundle<span class="token punctuation">.</span>js     <span class="token number">264</span> kB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
bundle<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map    <span class="token number">2.53</span> MB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
   index<span class="token punctuation">.</span>html  <span class="token number">184</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
    <span class="token operator">+</span> <span class="token number">339</span> hidden modules
</code></pre>
<p>So we went from 1.09 MB to 324 kB, and finally to 264 kB. The final build is a little faster than the previous one. As that 264k can be served gzipped, it is quite reasonable. gzipping will drop around another 40%. It is well supported by browsers.</p>
<p>We can do a little better, though. We can split <code>app</code> and <code>vendor</code> bundles and add hashes to their filenames.</p>
<h2 class="header"><a class="header-anchor" href="#splitting-app-and-vendor-bundles" id="splitting-app-and-vendor-bundles"></a><span class="text">Splitting <code>app</code> and <code>vendor</code> Bundles</span><a class="header-anchor-select" href="#splitting-app-and-vendor-bundles">#</a></h2>
<p>The main advantage of splitting the application into two separate bundles is that it allows us to benefit from client caching. We might, for instance, make most of our changes to the small <code>app</code> bundle. In this case, the client would have to fetch only the <code>app</code> bundle, assuming the <code>vendor</code> bundle has already been loaded.</p>
<p>This scheme won&apos;t load as fast as a single bundle initially due to the extra request. Thanks to client-side caching, we might not need to reload all the data for every request. This is particularly true if a bundle remains unchanged. For instance if only <code>app</code> updates, only that may need to be downloaded.</p>
<h3 class="header"><a class="header-anchor" href="#defining-a-vendor-entry-point" id="defining-a-vendor-entry-point"></a><span class="text">Defining a <code>vendor</code> Entry Point</span><a class="header-anchor-select" href="#defining-a-vendor-entry-point">#</a></h3>
<p>To get started, we need to define a <code>vendor</code> entry point:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">var</span> pkg <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./package.json&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> TARGET <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>npm_lifecycle_event<span class="token punctuation">;</span>
<span class="token keyword">var</span> ROOT_PATH <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> APP_PATH <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>ROOT_PATH<span class="token punctuation">,</span> <span class="token string">&apos;app&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> BUILD_PATH <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>ROOT_PATH<span class="token punctuation">,</span> <span class="token string">&apos;build&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>TARGET <span class="token operator">===</span> <span class="token string">&apos;build&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      app<span class="token punctuation">:</span> APP_PATH<span class="token punctuation">,</span>
      vendor<span class="token punctuation">:</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>pkg<span class="token punctuation">.</span>dependencies<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    devtool<span class="token punctuation">:</span> <span class="token string">&apos;source-map&apos;</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This tells Webpack that we want a separate <em>entry chunk</em> for our project <code>vendor</code> level dependencies. Webpack provides multiple ways to define chunks. Each chunk will contain a part of your application code. For example it&apos;s possible to set up chunks that are loaded dynamically.</p>
<h3 class="header"><a class="header-anchor" href="#adding-hashes-to-filenames" id="adding-hashes-to-filenames"></a><span class="text">Adding Hashes to Filenames</span><a class="header-anchor-select" href="#adding-hashes-to-filenames">#</a></h3>
<p>To make sure client-side caching works, we&apos;ll need to attach hashes to filenames. Webpack provides placeholders that are useful for this. The most useful ones are:</p>
<ul>
<li><code>[name]</code> - Returns entry name.</li>
<li><code>[hash]</code> - Returns build hash.</li>
<li><code>[chunkhash]</code> - Returns a chunk specific hash.</li>
</ul>
<p>Using these placeholders you could end up with filenames such as:</p>
<pre><code class="lang-bash">app<span class="token punctuation">.</span>d587bbd6e38337f5accd<span class="token punctuation">.</span>js
vendor<span class="token punctuation">.</span>dc746a5db4ed650296e1<span class="token punctuation">.</span>js
</code></pre>
<p>If the file contents are different, the hash will change as well, thus invalidating the cache, or more accurately the browser will send a new request for the new file.</p>
<p>An alternative way to achieve the same would be to generate static filenames and invalidate the cache through a querystring (i.e., <code>app.js?d587bbd6e38337f5accd</code>). The part behind the question mark will invalidate the cache. This method is not recommended. According to <a href="http://www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/">Steve Souders</a>, attaching the hash to the filename is a more performant way to go.</p>
<p>It&apos;s just as easy to include the hash in the filename itself, and I find this convention to be cleaner.</p>
<p>We can use the placeholder idea within our configuration like this:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">if</span><span class="token punctuation">(</span>TARGET <span class="token operator">===</span> <span class="token string">&apos;build&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      app<span class="token punctuation">:</span> APP_PATH<span class="token punctuation">,</span>
      vendor<span class="token punctuation">:</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>pkg<span class="token punctuation">.</span>dependencies<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment" spellcheck="true">/* important! */</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> BUILD_PATH<span class="token punctuation">,</span>
      filename<span class="token punctuation">:</span> <span class="token string">&apos;[name].[chunkhash].js?&apos;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>If you hit <code>npm run build</code> now, you should see output like this.</p>
<pre><code class="lang-bash"><span class="token operator">&gt;</span> webpack

Hash<span class="token punctuation">:</span> 93b7068ed91340e3f5ac
Version<span class="token punctuation">:</span> webpack <span class="token number">1.12</span><span class="token punctuation">.</span>0
Time<span class="token punctuation">:</span> 16398ms
                             Asset       Size  Chunks             Chunk Names
       app<span class="token punctuation">.</span>d9e6f800dcb46e3638b9<span class="token punctuation">.</span>js     <span class="token number">263</span> kB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  app
    vendor<span class="token punctuation">.</span>f6e6ad0dd8123b64e914<span class="token punctuation">.</span>js     <span class="token number">208</span> kB       <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendor
   app<span class="token punctuation">.</span>d9e6f800dcb46e3638b9<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map    <span class="token number">2.51</span> MB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  app
vendor<span class="token punctuation">.</span>f6e6ad0dd8123b64e914<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map    <span class="token number">2.13</span> MB       <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendor
                        index<span class="token punctuation">.</span>html  <span class="token number">266</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
   <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> multi vendor <span class="token number">76</span> bytes <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    <span class="token operator">+</span> <span class="token number">316</span> hidden modules
</code></pre>
<p>This isn&apos;t quite what we expected. Both our <code>app</code> and <code>vendor</code> bundles are big. The problem is that Webpack will include all the required files in the <code>app</code> bundle. This includes the <code>vendor</code> modules.</p>
<h3 class="header"><a class="header-anchor" href="#setting-up-commonschunkplugin-" id="setting-up-commonschunkplugin-"></a><span class="text">Setting Up <code>CommonsChunkPlugin</code></span><a class="header-anchor-select" href="#setting-up-commonschunkplugin-">#</a></h3>
<p>To fix our problem, we can use <code>CommonsChunkPlugin</code>. It can extract the code we need. We can tell it what <em>entry chunk</em> to extract and how to output it. Consider the configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">if</span><span class="token punctuation">(</span>TARGET <span class="token operator">===</span> <span class="token string">&apos;build&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token comment" spellcheck="true">/* important! */</span>
      <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span>
        <span class="token string">&apos;vendor&apos;</span><span class="token punctuation">,</span>
        <span class="token string">&apos;[name].[chunkhash].js&apos;</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>If you run <code>npm run build</code> now, you should see output as below:</p>
<pre><code class="lang-bash"><span class="token operator">&gt;</span> webpack

Hash<span class="token punctuation">:</span> 5a0cf7711f1d3fc5c930
Version<span class="token punctuation">:</span> webpack <span class="token number">1.12</span><span class="token punctuation">.</span>0
Time<span class="token punctuation">:</span> 10565ms
                             Asset       Size  Chunks             Chunk Names
       app<span class="token punctuation">.</span>bf777bbb05bec4070276<span class="token punctuation">.</span>js      <span class="token number">55</span> kB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  app
    vendor<span class="token punctuation">.</span>f33176572a7ad31551ee<span class="token punctuation">.</span>js     <span class="token number">209</span> kB       <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendor
   app<span class="token punctuation">.</span>bf777bbb05bec4070276<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map     <span class="token number">389</span> kB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  app
vendor<span class="token punctuation">.</span>f33176572a7ad31551ee<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map    <span class="token number">2.13</span> MB       <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendor
                        index<span class="token punctuation">.</span>html  <span class="token number">266</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
   <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> multi vendor <span class="token number">76</span> bytes <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    <span class="token operator">+</span> <span class="token number">316</span> hidden modules
</code></pre>
<p>Note how small <code>app</code> bundle is in comparison. If we update the application now and deploy it, the users that have used it before will have to reload only 55 kB.</p>
<p>One more way to push the build further would be to load popular dependencies, such as React, through a CDN. That would decrease the size of the vendor bundle even further while adding an external dependency on the project. The idea is that if the user has hit the CDN earlier, caching can kick in just like here.</p>
<h2 class="header"><a class="header-anchor" href="#cleaning-the-build" id="cleaning-the-build"></a><span class="text">Cleaning the Build</span><a class="header-anchor-select" href="#cleaning-the-build">#</a></h2>
<p>Our current setup doesn&apos;t clean the <code>build</code> directory between builds. As this can get annoying if we change our setup, we can use a plugin to clean the directory for us. Execute</p>
<pre><code class="lang-bash">npm i clean<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin <span class="token operator">--</span>save<span class="token operator">-</span>dev
</code></pre>
<p>to install the plugin. Change the build configuration as follows to integrate it:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">var</span> Clean <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;clean-webpack-plugin&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>TARGET <span class="token operator">===</span> <span class="token string">&apos;build&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">Clean</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;build&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>After this change our <code>build</code> directory should remain nice and tidy when building. See <a href="https://www.npmjs.com/package/clean-webpack-plugin">clean-webpack-plugin</a> for further options.</p>
<blockquote class="tip">An alternative would be to use your terminal (<code>rm -rf ./build/</code>) and set that up in the <code>scripts</code> section of <em>package.json</em>.</blockquote><h2 class="header"><a class="header-anchor" href="#separating-css" id="separating-css"></a><span class="text">Separating CSS</span><a class="header-anchor-select" href="#separating-css">#</a></h2>
<p>Even though we have a nice build set up now, where did all the CSS go? As per our configuration it has been inlined to JavaScript! Even though this can be convenient during development, it doesn&apos;t sound ideal. The current solution doesn&apos;t allow us to cache CSS. In some cases we might suffer from a flash of unstyled content (FOUC).</p>
<p>It just so happens that Webpack provides a means to generate a separate CSS bundle. We can achieve this using the <code>ExtractTextPlugin</code>. It comes with overhead during the compilation phase, and it won&apos;t work with Hot Module Replacement (HMR) by design. Given we are using it only for production, that won&apos;t be a problem.</p>
<p>It will take some configuration to make it work. Hit</p>
<pre><code class="lang-bash">npm i extract<span class="token operator">-</span>text<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin <span class="token operator">--</span>save<span class="token operator">-</span>dev
</code></pre>
<p>to get started. Next we need to get rid of our current CSS related declaration at <code>common</code> configuration. After that, we need to split it up between <code>build</code> and <code>dev</code> configuration sections as follows:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">var</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;extract-text-webpack-plugin&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> pkg <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./package.json&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> TARGET <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>npm_lifecycle_event<span class="token punctuation">;</span>
<span class="token keyword">var</span> ROOT_PATH <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> APP_PATH <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>ROOT_PATH<span class="token punctuation">,</span> <span class="token string">&apos;app&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> BUILD_PATH <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>ROOT_PATH<span class="token punctuation">,</span> <span class="token string">&apos;build&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> common <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> APP_PATH<span class="token punctuation">,</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;.js&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;.jsx&apos;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> BUILD_PATH<span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">&apos;bundle.js&apos;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.jsx?$/</span><span class="token punctuation">,</span>
        loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;babel&apos;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        include<span class="token punctuation">:</span> APP_PATH
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlwebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token punctuation">:</span> <span class="token string">&apos;Kanban app&apos;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>TARGET <span class="token operator">===</span> <span class="token string">&apos;start&apos;</span> <span class="token operator">||</span> <span class="token operator">!</span>TARGET<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
          loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;style&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;css&apos;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          include<span class="token punctuation">:</span> APP_PATH
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>TARGET <span class="token operator">===</span> <span class="token string">&apos;build&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    devtool<span class="token punctuation">:</span> <span class="token string">&apos;source-map&apos;</span><span class="token punctuation">,</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
          loader<span class="token punctuation">:</span> ExtractTextPlugin<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token string">&apos;style&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;css&apos;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          include<span class="token punctuation">:</span> APP_PATH
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">Clean</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;build&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span><span class="token string">&apos;styles.[chunkhash].css&apos;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Using this setup we can still benefit from the HMR during development. For a production build, we generate a separate CSS. <code>html-webpack-plugin</code> will pick it up automatically and inject it into our <code>index.html</code>.</p>
<blockquote class="warning">Definitions such as <code>loaders: [ExtractTextPlugin.extract(&apos;style&apos;, &apos;css&apos;)]</code> won&apos;t work and will cause the build to error instead! So when using <code>ExtractTextPlugin</code>, use the <code>loader</code> form instead.</blockquote><blockquote class="warning">If you want to pass more loaders to the <code>ExtractTextPlugin</code>, you should use <code>!</code> syntax. Example: <code>ExtractTextPlugin.extract(&apos;style&apos;, &apos;css!autoprefixer-loader&apos;)</code>.</blockquote><p>After running <code>npm run build</code> you should see output similar to the following:</p>
<pre><code class="lang-bash"><span class="token operator">&gt;</span> webpack

Hash<span class="token punctuation">:</span> 27584124a5659a941eea
Version<span class="token punctuation">:</span> webpack <span class="token number">1.12</span><span class="token punctuation">.</span>0
Time<span class="token punctuation">:</span> 10589ms
                              Asset       Size  Chunks             Chunk Names
        app<span class="token punctuation">.</span>4a3890cdb2f12f6bd4d5<span class="token punctuation">.</span>js    <span class="token number">54.3</span> kB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  app
     vendor<span class="token punctuation">.</span>876083b45225c03d8a74<span class="token punctuation">.</span>js     <span class="token number">208</span> kB       <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendor
    styles<span class="token punctuation">.</span>bf777bbb05bec4070276<span class="token punctuation">.</span>css  <span class="token number">557</span> bytes       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  app
    app<span class="token punctuation">.</span>4a3890cdb2f12f6bd4d5<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map     <span class="token number">389</span> kB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  app
styles<span class="token punctuation">.</span>bf777bbb05bec4070276<span class="token punctuation">.</span>css<span class="token punctuation">.</span>map   <span class="token number">87</span> bytes       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  app
 vendor<span class="token punctuation">.</span>876083b45225c03d8a74<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map    <span class="token number">2.12</span> MB       <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendor
                         index<span class="token punctuation">.</span>html  <span class="token number">317</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
   <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> multi vendor <span class="token number">64</span> bytes <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    <span class="token operator">+</span> <span class="token number">316</span> hidden modules
Child extract<span class="token operator">-</span>text<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin<span class="token punctuation">:</span>
        <span class="token operator">+</span> <span class="token number">2</span> hidden modules
</code></pre>
<p>This means we have separate app and vendor bundles. In addition, styles have been pushed to a separate file. And on top of this, we have sourcemaps and an automatically generated <em>index.html</em>.</p>
<blockquote class="tip">If you have a complex project with a lot of dependencies, it is likely a good idea to use the <code>DedupePlugin</code>. It will find possible duplicate files and deduplicate them. Use <code>new webpack.optimize.DedupePlugin()</code> in your plugins definition to enable it.</blockquote><blockquote class="warning">Note that there&apos;s <a href="https://github.com/webpack/webpack/issues/1315">a bug</a> in Webpack preventing this feature from working correctly at the moment! That is, if you change your application code, the hash for <code>vendor</code> will change!</blockquote><h2 class="header"><a class="header-anchor" href="#analyzing-build-statistics" id="analyzing-build-statistics"></a><span class="text">Analyzing Build Statistics</span><a class="header-anchor-select" href="#analyzing-build-statistics">#</a></h2>
<p>Analyzing build statistics is a good step towards understanding Webpack better. We can get statistics from it easily and we can visualize them using a tool. This shows us the composition of our bundles.</p>
<p>In order to get suitable output we&apos;ll need to do a couple of tweaks to our configuration:</p>
<p><strong>package.js</strong></p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;stats&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --profile --json &gt; stats.json&quot;</span><span class="token punctuation">,</span>
    ...
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment" spellcheck="true">//if(TARGET === &apos;build&apos;) {</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>TARGET <span class="token operator">===</span> <span class="token string">&apos;build&apos;</span> <span class="token operator">||</span> TARGET <span class="token operator">===</span> <span class="token string">&apos;stats&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre>
<p>If you hit <code>npm run stats</code> now, you should find <em>stats.json</em> at your project root after it has finished processing. We can take this file and pass it to <a href="http://webpack.github.io/analyse/">the online tool</a>. Note that the tool works only over HTTP! If your data is sensitive, consider using <a href="(https://github.com/webpack/analyse">the standalone version</a> instead.</p>
<p>Besides helping you to understand your bundle composition, the tool can help you to optimize your output further.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>Beyond the features discussed Webpack allows you to <a href="https://webpack.github.io/docs/code-splitting.html">lazy load</a> content through <code>require.ensure</code>. This is handy if you happen to have a specific dependency on some view and want to load it when you need it.</p>
<p>Our Kanban application is now ready to be served. We went from a chunky build to a slim one. Even better the production version can benefit from caching and it is able to invalidate it. You can also understand how isomorphic rendering works on a basic level.</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this chapter consider subscribing to <a href="http://eepurl.com/bth1v5">the mailing list</a> or following<a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote></div><div id="disqus_thread"></div></div><div class="prevnext"><div class="prevnext__prev"><div class="prevnext__bg" style="background-image:url(/images/dnd.jpg);"></div><span class="prevnext__info">Previous chapter</span><a class="prevnext__link" href="/webpack_react/implementing_dnd">Implementing Drag and Drop</a></div><div class="prevnext__next"><div class="prevnext__bg" style="background-image:url(/images/testing.jpg);"></div><span class="prevnext__info">Next chapter</span><a class="prevnext__link" href="/webpack_react/testing_react">Testing React*</a></div></div><a class="next-page" href="/webpack_react/testing_react">Testing React*</a><a class="previous-page" href="/webpack_react/implementing_dnd">Implementing Drag and Drop</a></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div></main></div></body></html>