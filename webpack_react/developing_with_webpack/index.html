<html lang="en"><head><title>SurviveJS - Developing with Webpack</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui"/><meta name="description" content="
If you are not one of those people who likes to skip the introductions, you might have some clue what Webpack is. In its simplicity, it is a module bundler. It takes a bunch of assets in and outputs assets you can give to your client.

This sounds simple, but in practice, it can be a complicated anâ€¦"/><meta name="keywords" content="webpack,react,javascript,programming,web development"/><link rel="icon" type="image/png" href="/assets/img/favicon.png"/><link rel="alternate" type="application/atom+xml" href="./atom.xml"/><link rel="stylesheet" href="/assets/main.css"/></head><body><main role="main"><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/assets/img/chapters/oscillo.jpg);"></div><h1 class="post__heading">Developing with Webpack</h1><div class="header-extra"><a href="https://www.flickr.com/photos/35237097961@N01/3561706030">Fumi Yamazaki (CC BY-NC-SA)</a></div><div class="toc-nav__wrapper"><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack_react/introduction">Introduction</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack_react/webpack">Setting Up Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack_react/webpack_compared">Webpack Compared</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Developing with Webpack</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack_react/webpack_and_react">Webpack and React</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack_react/react">Developing a Kanban Application</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack_react/implementing_notes">Implementing a Basic Note Application</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack_react/react_and_flux">React and Flux</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack_react/from_notes_to_kanban">From Notes to Kanban</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack_react/implementing_dnd">Implementing Drag and Drop</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack_react/building_kanban">Building Kanban</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack_react/advanced">Advanced Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack_react/testing_react">Testing React*</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack_react/typing_with_react">Typing with React*</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack_react/linting_in_webpack">Linting in Webpack</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack_react/authoring_libraries">Authoring Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack_react/styling_react">Styling React</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack_react/appendices">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack_react/structuring_react_projects">Structuring React Projects</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack_react/language_features">Language Features</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack_react/understanding_decorators">Understanding Decorators</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack_react/troubleshooting">Troubleshooting</a></li></ul><div class="resources__wrapper"><h4 class="resources--header">Resources</h4><ul class="resources-nav"><li><a href="https://www.npmjs.com/package/system-bell-webpack-plugin" class="resource-nav__link" target="_blank">System Bell plugin for webpack</a></li><li><a href="https://www.npmjs.com/package/open-browser-webpack-plugin" class="resource-nav__link" target="_blank">open-browser-webpack-plugin - Opens the browser when Webpack is ready serving your files</a></li><li><a href="https://www.npmjs.com/package/npm-install-webpack-plugin" class="resource-nav__link" target="_blank">npm-install-webpack-plugin - Webpack loader to automatically npm install and save dependencies.</a></li></ul></div></div><div class="chapter"><div class="post__content"><blockquote class="latestpost tip"><div>From the blog:</div><a class="latestpost-link" href="/blog/reindex-interview">Reindex - Instant GraphQL Backend for Your React Apps - Interview with Ville Immonen</a></blockquote><div class="post__meta"><a class="post__end_source" href="https://github.com/survivejs/webpack_react/tree/master/project_source/02_developing_with_webpack/kanban_app" target="_blank">Finished source code</a><a class="post__demo" href="/demos/02_developing_with_webpack" target="_blank">Demo</a></div><div class="chapter-content"><p>If you are not one of those people who likes to skip the introductions, you might have some clue what Webpack is. In its simplicity, it is a module bundler. It takes a bunch of assets in and outputs assets you can give to your client.</p>
<p>This sounds simple, but in practice, it can be a complicated and messy process. You definitely don&#39;t want to deal with all the details yourself. This is where Webpack fits in. Next, we&#39;ll get Webpack set up and your first project running in development mode.</p>
<blockquote class="warning"><i class="icon-attention"></i>Before getting started, make sure you are using a recent version of Node.js as that will save some trouble. There are <a href="https://nodejs.org/en/download/package-manager/">packages available for many platforms</a>. A good alternative is to set up a <a href="https://www.vagrantup.com/">Vagrant</a> box and maintain your development environment there.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i>Especially <em>css-loader</em> has <a href="https://github.com/webpack/css-loader/issues/144">issues with Node 0.10</a> given it&#39;s missing native support for promises. Consider polyfilling <code>Promise</code> through <code>require(&#39;es6-promise&#39;).polyfill()</code> at the beginning of your Webpack configuration if you still want to use 0.10. This technique depends on the <a href="https://www.npmjs.com/package/es6-promise">es6-promise</a> package.</blockquote><h2 class="header"><a class="header-anchor" href="#setting-up-the-project" id="setting-up-the-project"></a><span class="text">Setting Up the Project</span><a class="header-anchor-select" href="#setting-up-the-project">#</a></h2>
<p>Webpack is one of those tools that depends on <a href="http://nodejs.org/">Node.js</a>. Make sure you have it installed and that you have <code>npm</code> available at your terminal. Set up a directory for your project, navigate there, execute <code>npm init</code>, and fill in some details. You can just hit <em>return</em> for each and it will work. Here are the commands:</p>
<pre><code class="lang-bash"><span class="token function" >mkdir</span> kanban_app
<span class="token function" >cd</span> kanban_app
npm init -y <span class="token comment" spellcheck="true"># -y gives you default *package.json*, skip for more control</span>
</code></pre>
<p>As a result, you should have <em>package.json</em> at your project root. You can still tweak it manually to make further changes. We&#39;ll be doing some changes through <em>npm</em> tool, but it&#39;s fine to tweak the file to your liking. The official documentation explains various <a href="https://docs.npmjs.com/files/package.json">package.json options</a> in more detail. I also cover some useful library authoring related tricks later in this book.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>You can set those <code>npm init</code> defaults at <em>~/.npmrc</em>. See the <em>Authoring Packages</em> chapter for more information about npm and its usage.</blockquote><h3 class="header"><a class="header-anchor" href="#setting-up-git" id="setting-up-git"></a><span class="text">Setting Up Git</span><a class="header-anchor-select" href="#setting-up-git">#</a></h3>
<p>If you are into version control, as you should, this would be a good time to set up your repository. You can create commits as you progress with the project.</p>
<p>If you are using git, I recommend setting up a <em>.gitignore</em> to the project root:</p>
<p><strong>.gitignore</strong></p>
<pre><code class="lang-bash">node_modules
</code></pre>
<p>At the very least, you should have <em>node_modules</em> here as you probably don&#39;t want that to end up in the source control. The problem with that is that as some modules need to be compiled per platform, it gets rather messy to collaborate. Ideally, your <code>git status</code> should look clean. You can extend <em>.gitignore</em> as you go.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>You can push operating system level ignore rules, such as <em>.DS_Store</em> and <em>\</em>.log<em> to </em>~/.gitignore*. This will keep your project level rules simpler.</blockquote><h2 class="header"><a class="header-anchor" href="#installing-webpack" id="installing-webpack"></a><span class="text">Installing Webpack</span><a class="header-anchor-select" href="#installing-webpack">#</a></h2>
<p>Next, you should get Webpack installed. We&#39;ll do a local install and save it as a project dependency. This will allow us to maintain Webpack&#39;s version per project. Execute</p>
<pre><code class="lang-bash">npm i webpack --save-dev
</code></pre>
<p>npm maintains a directory where it installs possible executables of packages. You can display the exact path using <code>npm bin</code>. Most likely it points at <code>.../node_modules/.bin</code>. Try executing Webpack from there through terminal using <code>node_modules/.bin/webpack</code> or a similar command.</p>
<p>You should see a version, a link to the command line interface guide and a long list of options. We won&#39;t be using most of those, but it&#39;s good to know that this tool is packed with functionality, if nothing else.</p>
<pre><code class="lang-bash">kanban_app $ node_modules/.bin/webpack
webpack 1.12.12
Usage: https://webpack.github.io/docs/cli.html

Options:
  --help, -h, -?
  --config
  --context
  --entry
<span class="token punctuation" >..</span>.
  --display-cached-assets
  --display-reasons, --verbose, -v

Output filename not configured.
</code></pre>
<p>Webpack works using a global install as well (<code>-g</code> or <code>--global</code> flag during installation). It is preferred to keep it as a project dependency instead. This way you have direct control over the version you are running. This is a good practice overall as by keeping tools as your project dependencies means you have something that works standalone in other environments.</p>
<p>We can use <code>--save</code> and <code>--save-dev</code> to separate application and development dependencies. The former will install and write to <em>package.json</em> <code>dependencies</code> field whereas the latter will write to <code>devDependencies</code> instead. This separation keeps project dependencies more understandable. The separation will come in handy when we generate a vendor bundle later on at the <em>Building Kanban</em> chapter.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>There are handy shortcuts for <code>--save</code> and <code>--save-dev</code>. <code>-S</code> maps to <code>--save</code> and <code>-D</code> to <code>--save-dev</code>. So if you want to optimize for characters written, consider using these instead.</blockquote><h2 class="header"><a class="header-anchor" href="#directory-structure" id="directory-structure"></a><span class="text">Directory Structure</span><a class="header-anchor-select" href="#directory-structure">#</a></h2>
<p>As projects with just <em>package.json</em> are boring, we should set up something more concrete. To get started, we can implement a little web site that loads some JavaScript which we then build using Webpack. Set up a structure like this:</p>
<ul>
<li>/app<ul>
<li>index.js</li>
<li>component.js</li>
</ul>
</li>
<li>/build<ul>
<li>index.html</li>
</ul>
</li>
<li>package.json</li>
<li>webpack.config.js</li>
</ul>
<p>In this case, we&#39;ll generate <em>bundle.js</em> using Webpack based on our <em>/app</em>. To make this possible, we should set up some assets and <em>webpack.config.js</em>.</p>
<h2 class="header"><a class="header-anchor" href="#setting-up-assets" id="setting-up-assets"></a><span class="text">Setting Up Assets</span><a class="header-anchor-select" href="#setting-up-assets">#</a></h2>
<p>As you never get tired of <code>Hello world</code>, we might as well model a variant of that. Set up a component like this:</p>
<p><strong>app/component.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token keyword" >function</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >var</span> element <span class="token operator" >=</span> document<span class="token punctuation" >.</span><span class="token function" >createElement</span><span class="token punctuation" >(</span><span class="token string" >'h1'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  element<span class="token punctuation" >.</span>innerHTML <span class="token operator" >=</span> <span class="token string" >'Hello world'</span><span class="token punctuation" >;</span>

  <span class="token keyword" >return</span> element<span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>
</code></pre>
<p>Next, we are going to need an entry point for our application. It will simply <code>require</code> our component and render it through the DOM:</p>
<p><strong>app/index.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >var</span> component <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'./component'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token keyword" >var</span> app <span class="token operator" >=</span> document<span class="token punctuation" >.</span><span class="token function" >createElement</span><span class="token punctuation" >(</span><span class="token string" >'div'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

document<span class="token punctuation" >.</span>body<span class="token punctuation" >.</span><span class="token function" >appendChild</span><span class="token punctuation" >(</span>app<span class="token punctuation" >)</span><span class="token punctuation" >;</span>

app<span class="token punctuation" >.</span><span class="token function" >appendChild</span><span class="token punctuation" >(</span><span class="token function" >component</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>We are also going to need some HTML so we can load the generated bundle:</p>
<p><strong>build/index.html</strong></p>
<pre><code class="lang-html"><span class="token doctype" >&lt;!DOCTYPE html></span>
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>html</span> <span class="token attr-name" >lang</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>en<span class="token punctuation" >"</span></span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>head</span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>meta</span> <span class="token attr-name" >charset</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>utf-8<span class="token punctuation" >"</span></span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>title</span><span class="token punctuation" >></span></span>Kanban app<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>title</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>head</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>body</span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>div</span> <span class="token attr-name" >id</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>app<span class="token punctuation" >"</span></span><span class="token punctuation" >></span></span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>div</span><span class="token punctuation" >></span></span>

    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>script</span> <span class="token attr-name" >src</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>./bundle.js<span class="token punctuation" >"</span></span><span class="token punctuation" >></span></span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>script</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>body</span><span class="token punctuation" >></span></span>
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>html</span><span class="token punctuation" >></span></span>
</code></pre>
<p>We&#39;ll generate this file dynamically at <em>Building Kanban</em>, but the current setup is good enough for now.</p>
<h2 class="header"><a class="header-anchor" href="#setting-up-webpack-configuration" id="setting-up-webpack-configuration"></a><span class="text">Setting Up Webpack Configuration</span><a class="header-anchor-select" href="#setting-up-webpack-configuration">#</a></h2>
<p>We&#39;ll need to tell Webpack how to deal with the assets we just set up. For this purpose we&#39;ll develop a <em>webpack.config.js</em> file. Webpack and its development server will be able to discover this file through convention.</p>
<p>To map our application to <em>build/bundle.js</em> we need configuration like this:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >const</span> path <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'path'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

<span class="token keyword" >const</span> PATHS <span class="token operator" >=</span> <span class="token punctuation" >{</span>
  app<span class="token punctuation" >:</span> path<span class="token punctuation" >.</span><span class="token function" >join</span><span class="token punctuation" >(</span>__dirname<span class="token punctuation" >,</span> <span class="token string" >'app'</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
  build<span class="token punctuation" >:</span> path<span class="token punctuation" >.</span><span class="token function" >join</span><span class="token punctuation" >(</span>__dirname<span class="token punctuation" >,</span> <span class="token string" >'build'</span><span class="token punctuation" >)</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>

module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Entry accepts a path or an object of entries. We'll be using the</span>
  <span class="token comment" spellcheck="true">// latter form given it's convenient with more complex configurations.</span>
  entry<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    app<span class="token punctuation" >:</span> PATHS<span class="token punctuation" >.</span>app
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  output<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    path<span class="token punctuation" >:</span> PATHS<span class="token punctuation" >.</span>build<span class="token punctuation" >,</span>
    filename<span class="token punctuation" >:</span> <span class="token string" >'bundle.js'</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>
</code></pre>
<p>The <code>entry</code> path could be given as a relative one. The <a href="https://webpack.github.io/docs/configuration.html#context">context</a> field can be used to configure that lookup. Given plenty of places expect absolute paths, I prefer to use absolute paths everywhere to avoid confusion.</p>
<p>I like to use <code>path.join</code>, but <code>path.resolve</code> would be a good alternative. <code>path.resolve</code> is equivalent to navigating the file system through <em>cd</em>. <code>path.join</code> gives you just that, a join. See <a href="https://nodejs.org/api/path.html">Node.js path API</a> for the exact details.</p>
<p>If you execute <code>node_modules/.bin/webpack</code>, you should see output like this:</p>
<pre><code class="lang-bash">Hash: 2dca5a3850ce5d2de54c
Version: webpack 1.12.13
Time: 85ms
    Asset     Size  Chunks             Chunk Names
bundle.js  1.75 kB       0  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>  app
   <span class="token punctuation" >[</span>0<span class="token punctuation" >]</span> ./app/index.js 144 bytes <span class="token punctuation" >{</span>0<span class="token punctuation" >}</span> <span class="token punctuation" >[</span>built<span class="token punctuation" >]</span>
   <span class="token punctuation" >[</span>1<span class="token punctuation" >]</span> ./app/component.js 136 bytes <span class="token punctuation" >{</span>0<span class="token punctuation" >}</span> <span class="token punctuation" >[</span>built<span class="token punctuation" >]</span>
</code></pre>
<p>This means you have a build at your output directory. You can open the <code>build/index.html</code> file directly through a browser to examine the results. On OS X <code>open ./build/index.html</code> works.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>Another way to serve the contents of the directory through a server, such as <em>serve</em> (<code>npm i serve -g</code>). In this case, execute <code>serve</code> at the output directory and head to <code>localhost:3000</code> at your browser. You can configure the port through the <code>--port</code> parameter.</blockquote><h2 class="header"><a class="header-anchor" href="#adding-a-build-shortcut" id="adding-a-build-shortcut"></a><span class="text">Adding a Build Shortcut</span><a class="header-anchor-select" href="#adding-a-build-shortcut">#</a></h2>
<p>Given executing <code>node_modules/.bin/webpack</code> is a little verbose, we should do something about it. npm and <em>package.json</em> double as a task runner with some configuration. Adjust it as follows:</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-json">...
<span class="token property" >"scripts"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
  <span class="token property" >"build"</span><span class="token operator" >:</span> <span class="token string" >"webpack"</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
...
</code></pre>
<p>You can execute the scripts defined this way through <em>npm run</em>. If you execute <em>npm run build</em> now, you should get a build at your output directory just like earlier.</p>
<p>This works because npm adds <code>node_modules/.bin</code> temporarily to the path. As a result, rather than having to write <code>&quot;build&quot;: &quot;node_modules/.bin/webpack&quot;</code>, we can do just <code>&quot;build&quot;: &quot;webpack&quot;</code>. Unless Webpack is installed to the project, this can point to a possible global install. That can be potentially confusing. Prefer local installs over global for this reason.</p>
<p>Task runners, such as Grunt or Gulp, allow you to achieve the same result while operating in a cross-platform manner. If you go through <em>package.json</em> like this, you may have to be more careful. On the plus side, this is a very light approach. To keep things simple, we&#39;ll be relying on it.</p>
<h2 class="header"><a class="header-anchor" href="#setting-up-webpack-dev-server-" id="setting-up-webpack-dev-server-"></a><span class="text">Setting Up <em>webpack-dev-server</em></span><a class="header-anchor-select" href="#setting-up-webpack-dev-server-">#</a></h2>
<p>As developing your application through a build script like this will get boring eventually, Webpack provides neater means for development in particular. <em>webpack-dev-server</em> is a development server running in-memory. It refreshes content automatically in the browser while you develop your application. This makes it roughly equivalent to tools, such as <a href="http://livereload.com/">LiveReload</a> or <a href="http://www.browsersync.io/">Browsersync</a>.</p>
<p>The greatest advantage Webpack has over these tools is Hot Module Replacement (HMR). In short, it provides a way to patch the browser state without a full refresh. We&#39;ll discuss it in more detail when we go through the React setup.</p>
<blockquote class="warning"><i class="icon-attention"></i>You should use <em>webpack-dev-server</em> strictly for development. If you want to host your application, consider other, standard solutions, such as Apache or Nginx.</blockquote><p>To get started with <em>webpack-dev-server</em>, execute</p>
<pre><code class="lang-bash">npm i webpack-dev-server --save-dev
</code></pre>
<p>at the project root to get the server installed.</p>
<p>Just like above, we&#39;ll need to define an entry point to the <code>scripts</code> section of <em>package.json</em>. Given our <em>index.html</em> is below <em>./build</em>, we should let <em>webpack-dev-server</em> to serve the content from there. We&#39;ll move this to Webpack configuration later, but this will do for now:</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-json">...
<span class="token property" >"scripts"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
<div class="leanpub-delete">
  <span class="token property" >"build"</span><span class="token operator" >:</span> <span class="token string" >"webpack"</span>
</div>
<div class="leanpub-insert">
  <span class="token property" >"build"</span><span class="token operator" >:</span> <span class="token string" >"webpack"</span><span class="token punctuation" >,</span>
  <span class="token property" >"start"</span><span class="token operator" >:</span> <span class="token string" >"webpack-dev-server --content-base build"</span>
</div>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
...
</code></pre>
<p>If you execute either <em>npm run start</em> or <em>npm start</em> now, you should see something like this at the terminal:</p>
<pre><code class="lang-bash"><span class="token operator" >></span> webpack-dev-server

http://localhost:8080/
webpack result is served from /
content is served from <span class="token punctuation" >..</span>./kanban_app/build
404s will fallback to /index.html

webpack: bundle is now VALID.
</code></pre>
<p>The output means that the development server is running. If you open <em><a href="http://localhost:8080/">http://localhost:8080/</a></em> at your browser, you should see something. If you try modifying the code, you should see output at your terminal. The problem is that the browser doesn&#39;t catch these changes without a hard refresh. That&#39;s something we need to resolve next.</p>
<p><img src="/images/hello_01.png" alt="Hello world"></p>
<blockquote class="tip"><i class="icon-attention-circled"></i>If you fail to see anything at the browser, you may need to use a different port through <em>webpack-dev-server --port 3000</em> kind of invocation. One reason why the server might fail to run is simply because there&#39;s something else running in the port. You can verify this through a terminal command, such as <code>netstat -na | grep 8080</code>. If there&#39;s something running in the port 8080, it should display a message. The exact command may depend on your platform.</blockquote><h3 class="header"><a class="header-anchor" href="#splitting-up-the-configuration" id="splitting-up-the-configuration"></a><span class="text">Splitting Up the Configuration</span><a class="header-anchor-select" href="#splitting-up-the-configuration">#</a></h3>
<p>As the development setup has certain requirements of its own, we&#39;ll need to split our Webpack configuration. Given Webpack configuration is just JavaScript, there are many ways to achieve this. At least the following ways are feasible:</p>
<ul>
<li>Maintain configuration in multiple files and point Webpack to each through <code>--config</code> parameter. Share configuration through module imports. You can see this approach in action at <a href="https://github.com/webpack/react-starter">webpack/react-starter</a>.</li>
<li>Push configuration to a library which you then consume. Example: <a href="https://github.com/HenrikJoreteg/hjs-webpack">HenrikJoreteg/hjs-webpack</a>.</li>
<li>Maintain configuration within a single file and branch there. If we trigger a script through <em>npm</em> (i.e., <code>npm run test</code>), npm sets this information in an environment variable. We can match against it and return the configuration we want.</li>
</ul>
<p>I prefer the last approach as it allows me to understand what&#39;s going on easily. It is ideal for small projects, such as this.</p>
<p>To keep things simple and help with the approach, I&#39;ve defined a custom <code>merge</code> function that concatenates arrays and merges objects. This is convenient with Webpack as we&#39;ll soon see. Execute</p>
<pre><code class="lang-bash">npm i webpack-merge --save-dev
</code></pre>
<p>to add it to the project.</p>
<p>Next, we need to define some split points to our configuration so we can customize it per npm script. Here&#39;s the basic idea:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<div class="leanpub-insert">
<span class="token keyword" >const</span> merge <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'webpack-merge'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>

<div class="leanpub-insert">
<span class="token keyword" >const</span> TARGET <span class="token operator" >=</span> process<span class="token punctuation" >.</span>env<span class="token punctuation" >.</span>npm_lifecycle_event<span class="token punctuation" >;</span>
</div>
<span class="token keyword" >const</span> PATHS <span class="token operator" >=</span> <span class="token punctuation" >{</span>
  app<span class="token punctuation" >:</span> path<span class="token punctuation" >.</span><span class="token function" >join</span><span class="token punctuation" >(</span>__dirname<span class="token punctuation" >,</span> <span class="token string" >'app'</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
  build<span class="token punctuation" >:</span> path<span class="token punctuation" >.</span><span class="token function" >join</span><span class="token punctuation" >(</span>__dirname<span class="token punctuation" >,</span> <span class="token string" >'build'</span><span class="token punctuation" >)</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>

<div class="leanpub-delete">
module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token punctuation" >{</span>
</div>
<div class="leanpub-insert">
<span class="token keyword" >const</span> common <span class="token operator" >=</span> <span class="token punctuation" >{</span>
</div>
  <span class="token comment" spellcheck="true">// Entry accepts a path or an object of entries. We'll be using the</span>
  <span class="token comment" spellcheck="true">// latter form given it's convenient with more complex configurations.</span>
  entry<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    app<span class="token punctuation" >:</span> PATHS<span class="token punctuation" >.</span>app
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  output<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    path<span class="token punctuation" >:</span> PATHS<span class="token punctuation" >.</span>build<span class="token punctuation" >,</span>
    filename<span class="token punctuation" >:</span> <span class="token string" >'bundle.js'</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>

<div class="leanpub-insert">
<span class="token comment" spellcheck="true">// Default configuration</span>
<span class="token keyword" >if</span><span class="token punctuation" >(</span>TARGET <span class="token operator" >===</span> <span class="token string" >'start'</span> <span class="token operator" >||</span> <span class="token operator" >!</span>TARGET<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token function" >merge</span><span class="token punctuation" >(</span>common<span class="token punctuation" >,</span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>

<span class="token keyword" >if</span><span class="token punctuation" >(</span>TARGET <span class="token operator" >===</span> <span class="token string" >'build'</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token function" >merge</span><span class="token punctuation" >(</span>common<span class="token punctuation" >,</span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</div>
</code></pre>
<p>Now that we have room for expansion, we can hook up Hot Module Replacement to make the browser refresh and make the development mode more useful.</p>
<h3 class="header"><a class="header-anchor" href="#configuring-hot-module-replacement-hmr-" id="configuring-hot-module-replacement-hmr-"></a><span class="text">Configuring Hot Module Replacement (HMR)</span><a class="header-anchor-select" href="#configuring-hot-module-replacement-hmr-">#</a></h3>
<p>Hot Module Replacement gives us simple means to refresh the browser automatically as we make changes. The idea is that if we change our <em>app/component.js</em>, the browser will refresh itself. The same goes for possible CSS changes.</p>
<p>In order to make this work, we&#39;ll need to connect the generated bundle running in-memory to the development server. Webpack uses WebSocket based communication to achieve this. To keep things simple, we&#39;ll let Webpack generate the client portion for us through the development server <em>inline</em> option. The option will include the client side scripts needed by HMR to the bundle that Webpack generates.</p>
<p>Beyond this we&#39;ll need to enable <code>HotModuleReplacementPlugin</code> to make the setup work. In addition I am going to enable HTML5 History API fallback as that is convenient default to have especially if you are dealing with advanced routing. Here&#39;s the setup:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<div class="leanpub-insert">
<span class="token keyword" >const</span> webpack <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'webpack'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>

<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

<span class="token keyword" >if</span><span class="token punctuation" >(</span>TARGET <span class="token operator" >===</span> <span class="token string" >'start'</span> <span class="token operator" >||</span> <span class="token operator" >!</span>TARGET<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
<div class="leanpub-delete">
  module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token function" >merge</span><span class="token punctuation" >(</span>common<span class="token punctuation" >,</span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>
<div class="leanpub-insert">
  module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token function" >merge</span><span class="token punctuation" >(</span>common<span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
    devServer<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
      contentBase<span class="token punctuation" >:</span> PATHS<span class="token punctuation" >.</span>build<span class="token punctuation" >,</span>

      <span class="token comment" spellcheck="true">// Enable history API fallback so HTML5 History API based</span>
      <span class="token comment" spellcheck="true">// routing works. This is a good default that will come</span>
      <span class="token comment" spellcheck="true">// in handy in more complicated setups.</span>
      historyApiFallback<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>
      hot<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>
      inline<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>
      progress<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>

      <span class="token comment" spellcheck="true">// Display only errors to reduce the amount of output.</span>
      stats<span class="token punctuation" >:</span> <span class="token string" >'errors-only'</span><span class="token punctuation" >,</span>

      <span class="token comment" spellcheck="true">// Parse host and port from env so this is easy to customize.</span>
      <span class="token comment" spellcheck="true">//</span>
      <span class="token comment" spellcheck="true">// If you use Vagrant or Cloud9, set</span>
      <span class="token comment" spellcheck="true">// host: process.env.HOST || '0.0.0.0';</span>
      <span class="token comment" spellcheck="true">//</span>
      <span class="token comment" spellcheck="true">// 0.0.0.0 is available to all network devices unlike default</span>
      <span class="token comment" spellcheck="true">// localhost</span>
      host<span class="token punctuation" >:</span> process<span class="token punctuation" >.</span>env<span class="token punctuation" >.</span>HOST<span class="token punctuation" >,</span>
      port<span class="token punctuation" >:</span> process<span class="token punctuation" >.</span>env<span class="token punctuation" >.</span>PORT
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    plugins<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
      <span class="token keyword" >new</span> <span class="token class-name" >webpack<span class="token punctuation" >.</span>HotModuleReplacementPlugin</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>
<span class="token punctuation" >}</span>

<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
</code></pre>
<p>Given we pushed <code>contentBase</code> configuration to JavaScript, we can remove it from <em>package.json</em>:</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-json">...
<span class="token property" >"scripts"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
  <span class="token property" >"build"</span><span class="token operator" >:</span> <span class="token string" >"webpack"</span>
<div class="leanpub-delete">
  <span class="token property" >"start"</span><span class="token operator" >:</span> <span class="token string" >"webpack-dev-server --content-base build"</span>
</div>
<div class="leanpub-insert">
  <span class="token property" >"start"</span><span class="token operator" >:</span> <span class="token string" >"webpack-dev-server"</span>
</div>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
...
</code></pre>
<p>Execute <code>npm start</code> and surf to <strong>localhost:8080</strong>. Try modifying <em>app/component.js</em>. It should refresh the browser. Note that this is hard refresh in case you modify JavaScript code. CSS modifications work in a neater manner and can be applied without a refresh. In the next chapter we discuss how to achieve something similar with React. This will provide us a little better development experience.</p>
<p>If you using Windows and it doesn&#39;t refresh, see the following section for an alternative setup.</p>
<blockquote class="warning"><i class="icon-attention"></i><em>webpack-dev-server</em> can be very particular about paths. If the given <code>include</code> paths don&#39;t match the system casing exactly, this can cause it to fail to work. Webpack <a href="https://github.com/webpack/webpack/issues/675">issue #675</a> discusses this in more detail.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i>You should be able to access the application alternatively through <strong>localhost:8080/webpack-dev-server/</strong> instead of root. You can see all the files the development server is serving there.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i>If you want to default to some other port than <em>8080</em>, you can use a declaration like <code>port: process.env.PORT || 3000</code>.</blockquote><h3 class="header"><a class="header-anchor" href="#hmr-on-windows" id="hmr-on-windows"></a><span class="text">HMR on Windows</span><a class="header-anchor-select" href="#hmr-on-windows">#</a></h3>
<p>The setup may be problematic on certain versions of Windows. Instead of using <code>devServer</code> and <code>plugins</code> configuration, implement it like this:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

<span class="token keyword" >if</span><span class="token punctuation" >(</span>TARGET <span class="token operator" >===</span> <span class="token string" >'start'</span> <span class="token operator" >||</span> <span class="token operator" >!</span>TARGET<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token function" >merge</span><span class="token punctuation" >(</span>common<span class="token punctuation" >,</span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>

<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
</code></pre>
<p><strong>package.json</strong></p>
<pre><code class="lang-json">...
<span class="token property" >"scripts"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
  <span class="token property" >"build"</span><span class="token operator" >:</span> <span class="token string" >"webpack"</span><span class="token punctuation" >,</span>
<div class="leanpub-delete">
  <span class="token property" >"start"</span><span class="token operator" >:</span> <span class="token string" >"webpack-dev-server"</span>
</div>
<div class="leanpub-insert">
  <span class="token property" >"start"</span><span class="token operator" >:</span> <span class="token string" >"webpack-dev-server --watch-poll --inline --hot"</span>
</div>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
...
</code></pre>
<p>Given this setup polls the filesystem, it is going to be more resource intensive. It&#39;s worth giving a go if the default doesn&#39;t work, though.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>There are more details in <em>webpack-dev-server</em> issue <a href="https://github.com/webpack/webpack-dev-server/issues/155">#155</a>.</blockquote><h3 class="header"><a class="header-anchor" href="#accessing-development-server-from-network" id="accessing-development-server-from-network"></a><span class="text">Accessing Development Server from Network</span><a class="header-anchor-select" href="#accessing-development-server-from-network">#</a></h3>
<p>It is possible to customize host and port settings through the environment in our setup (i.e., <code>export PORT=3000</code> on Unix or <code>SET PORT=3000</code> on Windows). This can be useful if you want to access your server using some other device within the same network. The default settings are enough on most platforms.</p>
<p>To access your server, you&#39;ll need to figure out the ip of your machine. On Unix this can be achieved using <code>ifconfig</code>. On Windows <code>ipconfig</code> can be used. An npm package, such as <a href="https://www.npmjs.com/package/node-ip">node-ip</a> may come in handy as well. Especially on Windows you may need to set your <code>HOST</code> to match your ip to make it accessible.</p>
<h3 class="header"><a class="header-anchor" href="#alternative-ways-to-use-webpack-dev-server-" id="alternative-ways-to-use-webpack-dev-server-"></a><span class="text">Alternative Ways to Use <em>webpack-dev-server</em></span><a class="header-anchor-select" href="#alternative-ways-to-use-webpack-dev-server-">#</a></h3>
<p>We could have passed <em>webpack-dev-server</em> options through terminal. I find it clearer to manage it within Webpack configuration as that helps to keep <em>package.json</em> nice and tidy.</p>
<p>Alternatively, we could have set up an Express server of our own and used <em>webpack-dev-server</em> as a <a href="https://webpack.github.io/docs/webpack-dev-middleware.html">middleware</a>. There&#39;s also a <a href="https://webpack.github.io/docs/webpack-dev-server.html#api">Node.js API</a>.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://www.npmjs.com/package/dotenv">dotenv</a> allows you to define environment variables through a <em>.env</em> file. This can be somewhat convenient during development!</blockquote><blockquote class="warning"><i class="icon-attention"></i>Note that there are <a href="https://github.com/webpack/webpack-dev-server/issues/106">slight differences</a> between the CLI and the Node.js API. This is the reason why some prefer to solely use the Node.js API.</blockquote><h2 class="header"><a class="header-anchor" href="#refreshing-css" id="refreshing-css"></a><span class="text">Refreshing CSS</span><a class="header-anchor-select" href="#refreshing-css">#</a></h2>
<p>We can extend this approach to work with CSS. Webpack allows us to change CSS without forcing a full refresh. To load CSS into a project, we&#39;ll need to use a couple of loaders. To get started, invoke</p>
<pre><code class="lang-bash">npm i css-loader style-loader --save-dev
</code></pre>
<p>Now that we have the loaders we need, we&#39;ll need to make sure Webpack is aware of them. Configure as follows:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

<span class="token keyword" >const</span> common <span class="token operator" >=</span> <span class="token punctuation" >{</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<div class="leanpub-delete">
  <span class="token punctuation" >}</span>
</div>
<div class="leanpub-insert">
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  module<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    loaders<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
      <span class="token punctuation" >{</span>
        <span class="token comment" spellcheck="true">// Test expects a RegExp! Note the slashes!</span>
        test<span class="token punctuation" >:</span> <span class="token regex" >/\.css$/</span><span class="token punctuation" >,</span>
        loaders<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'style'</span><span class="token punctuation" >,</span> <span class="token string" >'css'</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
        <span class="token comment" spellcheck="true">// Include accepts either a path or an array of paths.</span>
        include<span class="token punctuation" >:</span> PATHS<span class="token punctuation" >.</span>app
      <span class="token punctuation" >}</span>
    <span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span>
</div>
<span class="token punctuation" >}</span>

<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
</code></pre>
<p>The configuration we added means that files ending with <code>.css</code> should invoke given loaders. <code>test</code> matches against a JavaScript style regular expression. The loaders are evaluated from right to left. In this case, <em>css-loader</em> gets evaluated first, then <em>style-loader</em>. <em>css-loader</em> will resolve <code>@import</code> and <code>url</code> statements in our CSS files. <em>style-loader</em> deals with <code>require</code> statements in our JavaScript. A similar approach works with CSS preprocessors, like Sass and Less, and their loaders.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>Loaders are transformations that are applied to source files, and return the new source. Loaders can be chained together, like using a pipe in Unix. See Webpack&#39;s <a href="http://webpack.github.io/docs/using-loaders.html">What are loaders?</a> and <a href="http://webpack.github.io/docs/list-of-loaders.html">list of loaders</a>.</blockquote><blockquote class="warning"><i class="icon-attention"></i>If <code>include</code> isn&#39;t set, Webpack will traverse all files within the base directory. This can hurt performance! It is a good idea to set up <code>include</code> always. There&#39;s also <code>exclude</code> option that may come in handy. Prefer <code>include</code>, however.</blockquote><h2 class="header"><a class="header-anchor" href="#setting-up-initial-css" id="setting-up-initial-css"></a><span class="text">Setting Up Initial CSS</span><a class="header-anchor-select" href="#setting-up-initial-css">#</a></h2>
<p>We are missing just one bit, the actual CSS itself:</p>
<p><strong>app/main.css</strong></p>
<pre><code class="lang-css"><span class="token selector" >body </span><span class="token punctuation" >{</span>
  <span class="token property" >background</span><span class="token punctuation" >:</span> cornsilk<span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>Also, we&#39;ll need to make Webpack aware of it. Without having a <code>require</code> pointing at it, Webpack won&#39;t be able to find the file:</p>
<p><strong>app/index.js</strong></p>
<pre><code class="lang-javascript"><div class="leanpub-insert">
<span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'./main.css'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>

<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
</code></pre>
<p>Execute <code>npm start</code> now. Point your browser to <strong>localhost:8080</strong> if you are using the default port.</p>
<p>Open up <em>main.css</em> and change the background color to something like <code>lime</code> (<code>background: lime</code>). Develop styles as needed to make it look a little nicer.</p>
<p><img src="/images/hello_02.png" alt="Hello cornsilk world"></p>
<blockquote class="tip"><i class="icon-attention-circled"></i>An alternative way to load CSS would be to define a separate entry through which we point at CSS. I discuss that at the <em>Building Kanban</em> chapter.</blockquote><h2 class="header"><a class="header-anchor" href="#enabling-sourcemaps" id="enabling-sourcemaps"></a><span class="text">Enabling Sourcemaps</span><a class="header-anchor-select" href="#enabling-sourcemaps">#</a></h2>
<p>To improve the debuggability of the application, we can set up sourcemaps. They allow you to see exactly where an error was raised. In Webpack this is controlled through the <code>devtool</code> setting. We can use a decent default as follows:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

<span class="token keyword" >if</span><span class="token punctuation" >(</span>TARGET <span class="token operator" >===</span> <span class="token string" >'start'</span> <span class="token operator" >||</span> <span class="token operator" >!</span>TARGET<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token function" >merge</span><span class="token punctuation" >(</span>common<span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
<div class="leanpub-insert">
    devtool<span class="token punctuation" >:</span> <span class="token string" >'eval-source-map'</span><span class="token punctuation" >,</span>
</div>
    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>

<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
</code></pre>
<p>If you run the development build now using <code>npm start</code>, Webpack will generate sourcemaps. Webpack provides many different ways to generate them as discussed in the <a href="https://webpack.github.io/docs/configuration.html#devtool">official documentation</a>. In this case, we&#39;re using <code>eval-source-map</code>. It builds slowly initially, but it provides fast rebuild speed and yields real files.</p>
<p>Faster development specific options, such as <code>cheap-module-eval-source-map</code> and <code>eval</code>, produce lower quality sourcemaps. All <code>eval</code> options will emit sourcemaps as a part of your JavaScript code. Therefore they are not suitable for a production environment. Given size isn&#39;t an issue during development, they tend to be a good fit for that use case.</p>
<p>It is possible you may need to enable sourcemaps in your browser for this to work. See <a href="https://developer.chrome.com/devtools/docs/javascript-debugging">Chrome</a> and <a href="https://developer.mozilla.org/en-US/docs/Tools/Debugger/How_to/Use_a_source_map">Firefox</a> instructions for further details.</p>
<h2 class="header"><a class="header-anchor" href="#avoiding-npm-install-by-using-npm-install-webpack-plugin-" id="avoiding-npm-install-by-using-npm-install-webpack-plugin-"></a><span class="text">Avoiding <code>npm install</code> by Using <em>npm-install-webpack-plugin</em></span><a class="header-anchor-select" href="#avoiding-npm-install-by-using-npm-install-webpack-plugin-">#</a></h2>
<p>In order to avoid some typing, we can set up a Webpack plugin known as <a href="https://www.npmjs.com/package/npm-install-webpack-plugin">npm-install-webpack-plugin</a>. As we develop the project, it will detect changes made to Webpack configuration and the projects files and install the dependencies for us. It will modify <em>package.json</em> automatically as well.</p>
<p>You can still install dependencies manually if you want. Any dependencies within <code>app</code> should be installed through <code>--save</code> (or <code>-S</code>). Root level dependencies (i.e. packages needed by Webpack), should be installed through <code>--save-dev</code> (or <code>-D</code>). This separation will become handy when we generate production bundles at <em>Building Kanban</em>.</p>
<p>To get the plugin installed, execute:</p>
<pre><code class="lang-bash">npm i npm-install-webpack-plugin --save-dev
</code></pre>
<p>We also need to connect it with our configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >const</span> path <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'path'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token keyword" >const</span> merge <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'webpack-merge'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token keyword" >const</span> webpack <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'webpack'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<div class="leanpub-insert">
<span class="token keyword" >const</span> NpmInstallPlugin <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'npm-install-webpack-plugin'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>

<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

<span class="token comment" spellcheck="true">// Default configuration</span>
<span class="token keyword" >if</span><span class="token punctuation" >(</span>TARGET <span class="token operator" >===</span> <span class="token string" >'start'</span> <span class="token operator" >||</span> <span class="token operator" >!</span>TARGET<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token function" >merge</span><span class="token punctuation" >(</span>common<span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
    plugins<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
<div class="leanpub-delete">
      <span class="token keyword" >new</span> <span class="token class-name" >webpack<span class="token punctuation" >.</span>HotModuleReplacementPlugin</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
</div>
<div class="leanpub-insert">
      <span class="token keyword" >new</span> <span class="token class-name" >webpack<span class="token punctuation" >.</span>HotModuleReplacementPlugin</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
      <span class="token keyword" >new</span> <span class="token class-name" >NpmInstallPlugin</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
        save<span class="token punctuation" >:</span> <span class="token boolean" >true</span> <span class="token comment" spellcheck="true">// --save</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
</div>
    <span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>

<span class="token keyword" >if</span><span class="token punctuation" >(</span>TARGET <span class="token operator" >===</span> <span class="token string" >'build'</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token function" >merge</span><span class="token punctuation" >(</span>common<span class="token punctuation" >,</span> <span class="token punctuation" >{</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>After this change we can save quite a bit of typing and context switches.</p>
<h2 class="header"><a class="header-anchor" href="#linting-the-project" id="linting-the-project"></a><span class="text">Linting the Project</span><a class="header-anchor-select" href="#linting-the-project">#</a></h2>
<p>I discuss linting in detail in the <em>Linting in Webpack</em> chapter. Consider integrating that setup into your project now as that will save some debugging time. It will allow you to pick up certain categories of errors earlier.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>In this chapter, you learned to build and develop using Webpack. I will return to the build topic at the <em>Building Kanban</em> chapter. The current setup is not ideal for production. At this point it&#39;s the development configuration that matters. In the next chapter, we will see how to expand the approach to work with React.</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this chapter consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><h2 class="subscribe-header">Subscribe to the mailing list</h2><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group social-input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-subscribe-container"><input type="submit" class="btn button social-subscribe" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/assets/img/chapters/apples_oranges.jpg);"></div><span class="new-prevnext__info">Previous chapter</span><a class="new-prevnext__link" href="/webpack_react/webpack_compared">Webpack Compared</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/assets/img/chapters/mainframe.jpg);"></div><span class="new-prevnext__info">Next chapter</span><a class="new-prevnext__link" href="/webpack_react/webpack_and_react">Webpack and React</a></div></div><div id="disqus_thread"></div></div><div><a class="next-page" title="Webpack and React" href="/webpack_react/webpack_and_react"><i class="icon-right-open"></i></a><a class="previous-page" title="Webpack Compared" href="/webpack_react/webpack_compared"><i class="icon-left-open"></i></a></div></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a class="" href="/">Home</a></div><div class="nav__link"><a class="" href="/blog">Read the blog</a></div><div class="nav__link"><a class="" href="https://leanpub.com/survivejs_webpack">Buy the full ebook</a></div><div class="nav__link"><a class="" href=""></a></div><div class="nav__link"><a class="" href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><div class="right ribbon github-fork-ribbon-wrapper"><div class="github-fork-ribbon" style="background-color:black;"><a href="https://github.com/survivejs/webpack_react/issues/new?title=Developing with Webpack - " target="_blank">Submit feedback</a></div></div><footer><div class="footer-wrapper"><div class="footer-content-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank">Mailing List</a></li><li><a href="https://gitter.im/survivejs/webpack_react" target="_blank">Gitter Chat</a></li><li><a href="https://github.com/survivejs/webpack_react" target="_blank">GitHub</a></li><li><a href="/atom.xml" target="_blank">Blog RSS</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank">Contact</a></li><li><a href="https://github.com/survivejs/ama/issues" target="_blank">Ask Me Anything</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/reindex-interview">Reindex - Instant GraphQL Backend for Your React Apps - Interview with Ville Immonen</a></li><li><a class="blog-teaser" href="/blog/survivejs-interview">SurviveJS - Learn Webpack and React - Interview with Juho VepsÃ¤lÃ¤inen</a></li><li><a class="blog-teaser" href="/blog/styleguidist-interview">react-styleguidist - Style guide generator for React - Interview with Artem Sapegin</a></li><li><a class="blog-teaser" href="/blog/survivejs200">SurviveJS - Webpack and React - v2.0.0</a></li><li><a class="blog-teaser" href="/blog/survivejs200-rc4">SurviveJS - Webpack and React - v2.0.0-rc4</a></li><li><a class="blog-teaser" href="/blog/towards-common-components">Towards a Common Component Definition</a></li><li><a class="blog-teaser" href="/blog/survivejs200-rc3">SurviveJS - Webpack and React - v2.0.0-rc3</a></li><li><a class="blog-teaser" href="/blog/survivejs200-rc2">SurviveJS - Webpack and React - v2.0.0-rc2</a></li><li><a class="blog-teaser" href="/blog/survivejs200-rc1">SurviveJS - Webpack and React - v2.0.0-rc1</a></li><li><a class="blog-teaser" href="/blog/codemod-interview">Codemod - Refactoring Code Programmatically - Interview with Ramana Venkata</a></li></ul></div></div></div></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
            ((window.gitter = {}).chat = {}).options = {
              showChatByDefault: false,
              activationElement: '.gitter-open-chat-button',
              room: 'survivejs/webpack_react'
            };
          </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div></main></body></html>